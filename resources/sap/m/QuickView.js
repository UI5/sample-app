/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./library","sap/ui/Device","sap/ui/core/IconPool","./QuickViewBase","./ResponsivePopover","./Page","./Bar","./Button"],function(e,t,o,i,r,n,s,a){"use strict";var p=e.PlacementType;var g=i.extend("sap.m.QuickView",{metadata:{library:"sap.m",properties:{placement:{type:"sap.m.PlacementType",group:"Misc",defaultValue:p.Right},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"320px"}},aggregations:{},designtime:"sap/m/designtime/QuickView.designtime",events:{afterOpen:{parameters:{openBy:{type:"sap.ui.core.Control"}}},afterClose:{parameters:{openBy:{type:"sap.ui.core.Control"},origin:{type:"sap.m.Button"}}},beforeOpen:{parameters:{openBy:{type:"sap.ui.core.Control"}}},beforeClose:{parameters:{openBy:{type:"sap.ui.core.Control"},origin:{type:"sap.m.Button"}}}}},renderer:{apiVersion:2,render:function(){}}});g.prototype.init=function(){i.prototype.init.apply(this);var e=this;this._oPopover=new r(this.getId()+"-quickView",{placement:this.getPlacement(),content:[this._oNavContainer],contentWidth:this.getWidth(),showHeader:false,showCloseButton:false,afterOpen:function(t){e._afterOpen(t);e.fireAfterOpen({openBy:t.getParameter("openBy")})},afterClose:function(t){e.fireAfterClose({openBy:t.getParameter("openBy"),origin:e.getCloseButton()})},beforeOpen:function(t){e.fireBeforeOpen({openBy:t.getParameter("openBy")})},beforeClose:function(t){e.fireBeforeClose({openBy:t.getParameter("openBy"),origin:e.getCloseButton()});e._bRendered=false}});this._oPopover.addStyleClass("sapMQuickView");var t=this._oPopover.getAggregation("_popup");t.addEventDelegate({onBeforeRendering:this._initializeQuickView,onAfterRendering:this._setLinkWidth,onkeydown:this._onPopupKeyDown},this);var e=this;var o=t._fnAdjustPositionAndArrow;if(o){t._fnAdjustPositionAndArrow=function(){o.apply(t,arguments);e._adjustContainerHeight()}}this._bItemsChanged=true};g.prototype._initializeQuickView=function(){this._bRendered=true;if(this._bItemsChanged){this._clearContainerHeight();this._initPages();var e=this._oNavContainer.getCurrentPage();if(e){var o=e.getCustomHeader();if(o&&o.getContentMiddle()[0]){this._oPopover.addAriaLabelledBy(o.getContentMiddle()[0].getId())}}var i=this.getAggregation("pages");if(!i&&t.system.phone){this._addEmptyPage()}this._bItemsChanged=false}};g.prototype.exit=function(){this._bRendered=false;this._bItemsChanged=true;if(this._oPopover){this._oPopover.destroy();this._oPopover=null}};g.prototype.invalidate=function(){};g.prototype._createPage=function(e){return e._createPage()};g.prototype._onPopupKeyDown=function(e){this._processKeyboard(e)};g.prototype._afterOpen=function(e){if(t.system.phone){this._restoreFocus()}};g.prototype._addEmptyPage=function(){var e=new n({customHeader:(new s).addStyleClass("sapMQuickViewHeader")});var t=this;var i=e.getCustomHeader();i.addContentRight(new a({icon:o.getIconURI("decline"),press:function(){t._oPopover.close()}}));e.addStyleClass("sapMQuickViewPage");this._oNavContainer.addPage(e)};g.prototype._clearContainerHeight=function(){var e=this._oPopover.getAggregation("_popup");var t=e.$().find(".sapMPopoverCont");if(t[0]&&t[0].style.height){t[0].style.height=""}};g.prototype._adjustContainerHeight=function(){if(this.getPages().length<=1){return}var e=this._oPopover.getAggregation("_popup");var t=e.$().find(".sapMPopoverCont");if(t[0]&&!t[0].style.height){t[0].style.height=t.outerHeight()+"px"}};g.prototype._setLinkWidth=function(){this._oPopover.$().find(".sapMLnk").css("width","auto")};g.prototype.getCloseButton=function(){if(!t.system.phone){return undefined}var e=this._oNavContainer.getCurrentPage();var o=e.getCustomHeader().getContentRight()[0];return o};g.prototype.setPlacement=function(e){this.setProperty("placement",e,true);this._oPopover.setPlacement(e);return this};g.prototype.setWidth=function(e){if(this._oPopover){this._oPopover.setContentWidth(e);this.setProperty("width",e,true)}return this};g.prototype.openBy=function(e){this._bItemsChanged=true;this._oPopover.openBy(e);return this};g.prototype.close=function(){this._oPopover.close();return this};g.prototype.getDomRef=function(e){return this._oPopover&&this._oPopover.getAggregation("_popup").getDomRef(e)};["addStyleClass","removeStyleClass","toggleStyleClass","hasStyleClass","getBusyIndicatorDelay","setBusyIndicatorDelay","getVisible","setVisible","getFieldGroupIds","setFieldGroupIds","getBusy","setBusy","setTooltip","getTooltip"].forEach(function(e){g.prototype[e]=function(){if(this._oPopover&&this._oPopover[e]){var t=this._oPopover.getAggregation("_popup")[e].apply(this._oPopover.getAggregation("_popup"),arguments);return t===this._oPopover.getAggregation("_popup")?this:t}}});["setModel","bindAggregation","setAggregation","insertAggregation","addAggregation","removeAggregation","removeAllAggregation","destroyAggregation"].forEach(function(e){g.prototype[e]=function(){var t=Array.prototype.slice.call(arguments),o;if(["setModel","bindAggregation"].indexOf(e)===-1){t.push(true)}o=i.prototype[e].apply(this,t);this._bItemsChanged=true;if(this._oPopover){if(arguments[0]!=="pages"){this._oPopover[e].apply(this._oPopover,arguments)}if(this._bRendered){this._initializeQuickView()}}if(["removeAggregation","removeAllAggregation"].indexOf(e)!==-1){return o}return this}});return g});
//# sourceMappingURL=QuickView.js.map