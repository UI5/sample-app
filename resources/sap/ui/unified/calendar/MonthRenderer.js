/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/i18n/date/CalendarType","sap/ui/core/Element","sap/ui/core/Lib","sap/ui/unified/calendar/CalendarUtils","sap/ui/unified/calendar/CalendarDate","sap/ui/unified/CalendarLegend","sap/ui/unified/CalendarLegendRenderer","sap/ui/unified/library","sap/base/Log","sap/ui/core/InvisibleText","sap/ui/core/date/UI5Date","sap/ui/core/date/CalendarUtils","sap/ui/core/Locale"],function(e,t,a,i,r,n,s,o,l,d,c,g,p){"use strict";var f=o.CalendarDayType;var u={apiVersion:2};u.render=function(e,t){var i=this.getStartDate(t),r=t.getTooltip_AsString(),n=a.getResourceBundleFor("sap.ui.unified"),s=t.getId(),o={value:"",append:!t._bCalendar},l="",c=t.getWidth();e.openStart("div",t);this.getClass(e,t).forEach(function(t){e.class(t)});if(t._getSecondaryCalendarType()){e.class("sapUiCalMonthSecType")}this.addWrapperAdditionalStyles(e,t);if(r){e.attr("title",r)}if(t._getShowHeader()){o.value=s+"-Head"}if(t._bCalendar){l=d.getStaticId("sap.ui.unified","CALENDAR_MONTH_PICKER_OPEN_HINT")+" "+d.getStaticId("sap.ui.unified","CALENDAR_YEAR_PICKER_OPEN_HINT")}if(c){e.style("width",c)}e.accessibilityState(t,{role:"grid",roledescription:t._bCalendar?"":n.getText("CALENDAR_DIALOG"),multiselectable:!t.getSingleSelection()||t.getIntervalSelection(),labelledby:o,describedby:l});e.openEnd();this.renderMonth(e,t,i);e.close("div")};u.addWrapperAdditionalStyles=function(){};u.getStartDate=function(e){return e._getDate()};u.getClass=function(t,a){var i=["sapUiCalMonthView"],r=a.getPrimaryCalendarType(),n=a.getShowWeekNumbers();if(r===e.Islamic||!n){i.push("sapUiCalNoWeekNum")}return i};u.renderMonth=function(e,t,a){this.renderHeader(e,t,a);this.renderDays(e,t,a)};u.renderHeader=function(e,t,a){var i=t._getLocaleData();var r=t._getFirstDayOfWeek();this.renderHeaderLine(e,t,i,a);e.openStart("div");e.accessibilityState(null,{role:"row"});e.style("overflow","hidden");e.openEnd();this.renderDayNames(e,t,i,r,7,true,undefined);e.close("div")};u.renderHeaderLine=function(e,t,a,r){i._checkCalendarDate(r);if(t._getShowHeader()){var n=t.getId();var s=t.getPrimaryCalendarType();var o=a.getMonthsStandAlone("wide",s);e.openStart("div",n+"-Head");e.class("sapUiCalHeadText");e.openEnd();e.text(o[r.getMonth()]);e.close("div")}};u.renderDayNames=function(t,a,i,r,n,s,o){var l=a._getFirstDayOfWeek();var d=a.getId();var c="";var g=a.getPrimaryCalendarType();var p=[];if(a._bLongWeekDays||!a._bNamesLengthChecked){p=i.getDaysStandAlone("abbreviated",g)}else{p=i.getDaysStandAlone("narrow",g)}var f=i.getDaysStandAlone("wide",g);if(a.getShowWeekNumbers()&&g!==e.Islamic){this.renderDummyCell(t,"sapUiCalWH",true,"columnheader")}for(var u=0;u<n;u++){if(s){c=d+"-WH"+(u+l)%7}else{c=d+"-WH"+u}t.openStart("div",c);t.class("sapUiCalWH");if(u===0){t.class("sapUiCalFirstWDay")}if(o){t.style("width",o)}t.accessibilityState(null,{role:"columnheader"});t.openEnd();t.openStart("span");t.attr("aria-hidden","true");t.openEnd();t.text(p[(u+r)%7]);t.close("span");t.openStart("span");t.class("sapUiPseudoInvisibleText");t.openEnd();t.text(f[(u+r)%7]);t.close("span");t.close("div")}};u.renderDays=function(t,a,r){var n,s,o,l,d,c,g;i._checkCalendarDate(r);if(!r){r=a._getFocusedDate()}c=r.toUTCJSDate().getTime();if(!c&&c!==0){throw new Error("Date is invalid "+a)}l=this.getDayHelper(a,r);s=a._getVisibleDays(r,true);g=a.getShowWeekNumbers();n=a.getPrimaryCalendarType()!==e.Islamic&&g;o=s.length;for(d=0;d<o;d++){if(d%7===0){t.openStart("div");t.attr("role","row");t.openEnd();if(n){this.renderWeekNumbers=true;this._renderWeekNumber(t,s[d],l,a)}}this.renderDay(t,a,s[d],l,true,n,-1);if(d%7===6||d===o-1){t.close("div")}}if(o===28){this.renderDummyCell(t,"sapUiCalItem",false,"")}};u.renderDummyCell=function(e,t,i,r){e.openStart("div");e.class(t);e.class("sapUiCalDummy");e.style("visibility",i?"visible":"hidden");e.attr("role",r);e.openEnd();e.openStart("span");e.class("sapUiPseudoInvisibleText");e.openEnd();e.text(a.getResourceBundleFor("sap.ui.unified").getText("CALENDAR_WEEK"));e.close("span");e.close("div")};u.isTypeAttributeRequired=function(e,t,a,i){const r=i.color?.toLowerCase();if(e){return a===r&&t===i.type}return t===""||t===f.None||t===i.type};u.isColorAttributeRequired=function(e,t,a,i,r){const n=e&&!t;const s=e===a&&i===r[0].type;const o=e===a&&(!i||i===f.None);if(n){return true}return s||o};u.getDayHelper=function(e,a){var i,s,o=e._getLocaleData(),d={sLocale:e._getLocale(),oLocaleData:o,iMonth:a.getMonth(),iYear:a.getYear(),iFirstDayOfWeek:e._getFirstDayOfWeek(),iWeekendStart:o.getWeekendStart(),iWeekendEnd:o.getWeekendEnd(),aNonWorkingDays:e._getNonWorkingDays(),sToday:o.getRelativeDay(0),oToday:r.fromLocalJSDate(c.getInstance(),e.getPrimaryCalendarType()),sId:e.getId(),oFormatLong:e._getFormatLong(),sPrimaryCalendarType:e.getPrimaryCalendarType(),sSecondaryCalendarType:e._getSecondaryCalendarType(),oLegend:undefined,aSelectedDates:e.getSelectedDates()};s=e.getLegend();if(s&&typeof s==="string"){i=t.getElementById(s);if(i){if(!(i instanceof n)){throw new Error(i+" is not an sap.ui.unified.CalendarLegend. "+e)}d.oLegend=i}else{l.warning("CalendarLegend "+s+" does not exist!",e)}}return d};u.renderDay=function(e,t,a,n,o,l,c,u,y){i._checkCalendarDate(a);var D=new r(a,n.sSecondaryCalendarType),m=t._getAriaRole()==="gridcell"&&t._getSelectableAccessibilitySemantics(),C=m?t._getDayDescription():"",S=!y&&c>=0?n.sId+"-WH"+c:"",_={role:t._getAriaRole(),selected:m?false:null,label:"",describedby:`${C} ${S}`.trim()||""},b=a._bBeforeFirstYear,h="",E=n.oLegend;var T=t._oFormatYyyymmdd.format(a.toUTCJSDate(),true);var N=a.getDay();var L=t._checkDateSelected(a);var v=t._getDateTypes(a);var W=n&&n.oLegend?n.oLegend._getSpecialDateTypeFilter():"";var A=n?.oLegend?n.oLegend._getSpecialDateColorFilter().toLowerCase():"";var I=t._checkDateEnabled(a);var k=t._isSpecialDateMarkerEnabled(a);const U=v.length>0&&v[0].type;const R=v.length>0&&v[0].secondaryType;const w=n.aNonWorkingDays&&n.aNonWorkingDays instanceof Array?n.aNonWorkingDays.some(e=>a.getDay()===e):i._isWeekend(a,t._getLocaleData());const x=U!==f.Working&&R!==f.Working&&w;const F=U===f.NonWorking||R===f.NonWorking||x;const O=!!(W||A)&&(W!==f.None||A);const $=t._oUnifiedRB.getText("LEGEND_NON_WORKING_DAY");const P=d.getStaticId("sap.ui.unified","CALENDAR_START_DATE");const M=d.getStaticId("sap.ui.unified","CALENDAR_END_DATE");const H=[];if(b){I=false}e.openStart("div",n.sId+"-"+T);e.class("sapUiCalItem");e.class("sapUiCalWDay"+N);if(u){e.style("width",u)}if(N===n.iFirstDayOfWeek){e.class("sapUiCalFirstWDay")}if(o&&n.iMonth!==a.getMonth()){e.class("sapUiCalItemOtherMonth");_["disabled"]=true}if(a.isSame(n.oToday)){e.class("sapUiCalItemNow");H.push(t._oUnifiedRB.getText("LEGEND_TODAY"))}if(L>0){e.class("sapUiCalItemSel");if(m){_["selected"]=true}}else if(m){_["selected"]=false}if(L===2){e.class("sapUiCalItemSelStart");_["describedby"]=`${_["describedby"]} ${P}`.trim()}else if(L===3){e.class("sapUiCalItemSelEnd");_["describedby"]=`${_["describedby"]} ${M}`.trim()}else if(L===4){e.class("sapUiCalItemSelBetween")}else if(L===5){e.class("sapUiCalItemSelStart");e.class("sapUiCalItemSelEnd");_["describedby"]=`${_["describedby"]} ${P}`.trim();_["describedby"]=`${_["describedby"]} ${M}`.trim()}if(this.renderWeekNumbers&&t.getShowWeekNumbers()&&t._oDate){const e=g.getWeekConfigurationValues(t.getCalendarWeekNumbering(),new p(t._getLocale()));e.firstDayOfWeek=t._getFirstDayOfWeek();const n=r.fromLocalJSDate(i.getFirstDateOfWeek(a.toLocalJSDate(),e),t.getPrimaryCalendarType());_["describedby"]=_["describedby"]+" "+t.getId()+"-week-"+t._calculateWeekNumber(n)+"-text"}else if(t.getShowWeekNumbers()&&t._oDate){const e=t.getParent()?t.getParent().getId():t.getId();const i=t._calculateWeekNumber(a);_["describedby"]=_["describedby"]+" "+e+"-WeeksRow"+"-week-"+i+"-text"}if(F){e.class("sapUiCalItemWeekEnd");H.push($)}if(k){const t=this;v.forEach(function(a,i){if(a.type!==f.None){if(t.isTypeAttributeRequired(O,W,A,a)){if(i===0){e.class("sapUiCalItem"+a.type)}h=a.type;if(a.tooltip){H.push(a.tooltip)}}}})}if(H.length){const t=H.filter((e,t)=>H.indexOf(e)===t);e.attr("title",t.join(" "))}if((t.getParent()&&t.getParent().getMetadata().getName()==="sap.ui.unified.CalendarOneMonthInterval"||t.getMetadata().getName()==="sap.ui.unified.calendar.OneMonthDatesRow")&&t.getStartDate()&&n.iMonth!==a.getMonth()){e.class("sapUiCalItemOtherMonth")}if(!I){e.class("sapUiCalItemDsbl");_["disabled"]=true}e.attr("tabindex","-1");e.attr("data-sap-day",T);_["label"]=this._getDayAriaLabel(a,n,t,y,D);if(h!==""){s.addCalendarTypeAccInfo(_,h,E)}if(v[0]&&v[0].customData?.length&&k){v[0].customData.forEach(t=>{if(t.getWriteToDom()){e.attr(`data-${t.getKey()}`,t.getValue())}})}e.accessibilityState(null,_);e.openEnd();if(v[0]&&k){e.openStart("div");e.class("sapUiCalSpecialDate");const t=v[0].color?.toLowerCase();if(this.isColorAttributeRequired(t,O,A,W,v)){e.style("background-color",t)}e.openEnd();e.close("div")}e.openStart("span");e.class("sapUiCalItemText");if(v[0]&&v[0].color){e.class("sapUiCalItemTextCustomColor")}e.openEnd();if(!b){e.text(a.getDate())}e.close("span");if(y){e.openStart("span");e.class("sapUiCalDayName");e.openEnd();e.text(n.aWeekDays[N]);e.close("span")}if(n.sSecondaryCalendarType){e.openStart("span");e.class("sapUiCalItemSecText");e.openEnd();e.text(D.getDate());e.close("span")}e.close("div")};u._getDayAriaLabel=function(e,t,a,i,n){let s="";const o=t.aSelectedDates.filter(e=>e.getStartDate()&&e.getEndDate());if(i){s=`${t.aWeekDaysWide[e.getDay()]} `}if(o.length>0){const i=r.fromLocalJSDate(o[0].getStartDate(),t.sPrimaryCalendarType);const n=r.fromLocalJSDate(o[0].getEndDate(),t.sPrimaryCalendarType);const l=o[0].getStartDate();const d=o[0].getEndDate();if(e.isSame(i)){s=`${s}${a._oUnifiedRB.getText("CALENDAR_RANGE_SELECTION_START_DATE",[t.oFormatLong.format(l)])}`}else if(e.isSame(n)){s=`${s}${a._oUnifiedRB.getText("CALENDAR_RANGE_SELECTION_END_DATE",[t.oFormatLong.format(d)])}`}else if(e.isAfter(i)&&e.isBefore(n)){s=`${s}${a._oUnifiedRB.getText("CALENDAR_RANGE_SELECTION_PART_OF_RANGE",[t.oFormatLong.format(e.toLocalJSDate())])}`}else{s=`${s}${t.oFormatLong.format(e.toUTCJSDate(),true)}`}}else{s=`${s}${t.oFormatLong.format(e.toUTCJSDate(),true)}`}if(t.sSecondaryCalendarType){s=`${s} ${a._oFormatSecondaryLong.format(n.toUTCJSDate(),true)}`}return s};u._renderWeekNumber=function(e,t,a,i){var r=i._calculateWeekNumber(t);var n=a.sId+"-WNum-"+r;e.openStart("div",n);e.class("sapUiCalWeekNum");e.accessibilityState(null,{role:"rowheader",labelledby:d.getStaticId("sap.ui.unified","CALENDAR_WEEK")+" "+n});e.openEnd();e.text(r);e.close("div")};return u},true);
//# sourceMappingURL=MonthRenderer.js.map