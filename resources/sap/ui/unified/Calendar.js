/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/i18n/Formatting","sap/base/i18n/Localization","sap/base/i18n/date/CalendarType","sap/ui/core/Control","sap/ui/core/Element","sap/ui/core/LocaleData","sap/ui/core/Lib","sap/ui/unified/calendar/CalendarUtils","sap/ui/unified/DateTypeRange","./calendar/Header","./calendar/Month","./calendar/MonthPicker","./calendar/YearPicker","./calendar/YearRangePicker","./calendar/CalendarDate","sap/ui/core/date/UniversalDate","sap/ui/core/date/UI5Date","./library","sap/ui/Device","sap/ui/core/format/DateFormat","sap/ui/core/ResizeHandler","sap/ui/core/Locale","sap/ui/events/KeyCodes","./CalendarRenderer","sap/ui/dom/containsOrEquals","sap/base/util/deepEqual","sap/base/Log","sap/base/i18n/date/CalendarWeekNumbering"],function(e,t,a,r,i,s,o,n,h,g,l,d,u,c,_,p,f,y,D,m,P,M,T,C,v,S,A,k){"use strict";var Y=r.extend("sap.ui.unified.Calendar",{metadata:{library:"sap.ui.unified",designtime:"sap/ui/unified/designtime/Calendar.designtime",properties:{intervalSelection:{type:"boolean",group:"Behavior",defaultValue:false},singleSelection:{type:"boolean",group:"Behavior",defaultValue:true},months:{type:"int",group:"Appearance",defaultValue:1},firstDayOfWeek:{type:"int",group:"Appearance",defaultValue:-1},nonWorkingDays:{type:"int[]",group:"Appearance",defaultValue:null},primaryCalendarType:{type:"sap.base.i18n.date.CalendarType",group:"Appearance"},secondaryCalendarType:{type:"sap.base.i18n.date.CalendarType",group:"Appearance"},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},minDate:{type:"object",group:"Misc",defaultValue:null},maxDate:{type:"object",group:"Misc",defaultValue:null},showWeekNumbers:{type:"boolean",group:"Appearance",defaultValue:true},showCurrentDateButton:{type:"boolean",group:"Behavior",defaultValue:false},_currentPicker:{type:"string",group:"Appearance",visibility:"hidden"},calendarWeekNumbering:{type:"sap.base.i18n.date.CalendarWeekNumbering",group:"Appearance",defaultValue:null},initialFocusedDate:{type:"object",group:"Data",defaultValue:null}},aggregations:{selectedDates:{type:"sap.ui.unified.DateRange",multiple:true,singularName:"selectedDate"},specialDates:{type:"sap.ui.unified.DateTypeRange",multiple:true,singularName:"specialDate"},disabledDates:{type:"sap.ui.unified.DateRange",multiple:true,singularName:"disabledDate"},header:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},secondMonthHeader:{type:"sap.ui.unified.calendar.Header",multiple:false,visibility:"hidden"},month:{type:"sap.ui.unified.calendar.Month",multiple:true,visibility:"hidden"},monthPicker:{type:"sap.ui.unified.calendar.MonthPicker",multiple:false,visibility:"hidden"},yearPicker:{type:"sap.ui.unified.calendar.YearPicker",multiple:false,visibility:"hidden"},yearRangePicker:{type:"sap.ui.unified.calendar.YearPicker",multiple:false,visibility:"hidden"}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"},legend:{type:"sap.ui.unified.CalendarLegend",multiple:false}},events:{select:{},cancel:{},startDateChange:{},weekNumberSelect:{allowPreventDefault:true,parameters:{weekNumber:{type:"int"},weekDays:{type:"sap.ui.unified.DateRange"}}}}},renderer:C});var b={MONTH:"month",MONTH_PICKER:"monthPicker",YEAR_PICKER:"yearPicker",YEAR_RANGE_PICKER:"yearRangePicker"};Y.prototype.init=function(){this._iBreakPointTablet=D.media._predefinedRangeSets[D.media.RANGESETS.SAP_STANDARD_EXTENDED].points[0];this._iBreakPointDesktop=D.media._predefinedRangeSets[D.media.RANGESETS.SAP_STANDARD_EXTENDED].points[1];this._iBreakPointLargeDesktop=D.media._predefinedRangeSets[D.media.RANGESETS.SAP_STANDARD_EXTENDED].points[2];this._iColumns=1;this._oResourceBundle=o.getResourceBundleFor("sap.ui.unified");this.setProperty("_currentPicker",b.MONTH_PICKER);this._oYearFormat=m.getDateInstance({format:"y",calendarType:this._getPrimaryCalendarType()});this.data("sap-ui-fastnavgroup","true",true);this._oMinDate=n._minDate(this._getPrimaryCalendarType());this._oMaxDate=n._maxDate(this._getPrimaryCalendarType());this._initializeHeader();this._initializeSecondMonthHeader();var e=this._createMonth(this.getId()+"--Month0");e.attachEvent("focus",this._handleFocus,this);e.attachEvent("select",L,this);e.attachEvent("_renderMonth",N,this);e.attachEvent("_bindMousemove",F,this);e.attachEvent("_unbindMousemove",I,this);e._bNoThemeChange=true;this.addAggregation("month",e);this._initializeMonthPicker();this._initializeYearPicker();this._initializeYearRangePicker();this._resizeProxy=H.bind(this);this._oSelectedMonth;this._bSkipCancelButtonRendering=false;this._bActionTriggeredFromSecondHeader=false};Y.prototype.exit=function(){if(this._sInvalidateMonth){clearTimeout(this._sInvalidateMonth)}if(this._afterHeaderRenderAdjustCSS){this.removeDelegate(this._afterHeaderRenderAdjustCSS);this._afterHeaderRenderAdjustCSS=null}if(this._afterSecondHeaderRenderAdjustCSS){this.removeDelegate(this._afterSecondHeaderRenderAdjustCSS);this._afterSecondHeaderRenderAdjustCSS=null}if(this._sResizeListener){P.deregister(this._sResizeListener);this._sResizeListener=undefined}this._oSelectedMonth=null};Y.prototype._initializeHeader=function(){var e=new g(this.getId()+"--Head");e.attachEvent("pressPrevious",this._handlePrevious,this);e.attachEvent("pressNext",this._handleNext,this);e.attachEvent("pressCurrentDate",this._handleCurrentDate,this);e.attachEvent("pressButton1",this._handleButton1,this);e.attachEvent("pressButton2",this._handleButton2,this);e.attachEvent("pressButton3",this._handleButton1,this);e.attachEvent("pressButton4",this._handleButton2,this);e.setProperty("_keyShortcutButton1",this._oResourceBundle.getText("CALENDAR_HEADER_MONTH_BUTTON_SHORTCUT"));e.setProperty("_keyShortcutButton2",this._oResourceBundle.getText("CALENDAR_HEADER_YEAR_BUTTON_SHORTCUT"));e.setProperty("_currentPicker",b.MONTH);this._afterHeaderRenderAdjustCSS=this._createOnAfterRenderingDelegate(e);e.addDelegate(this._afterHeaderRenderAdjustCSS);this.setAggregation("header",e)};Y.prototype._createOnAfterRenderingDelegate=function(e){return{onAfterRendering:function(){if(e.getVisible()&&!e.getVisibleButton1()){e.$().find(".sapUiCalHeadB2").addClass("sapUiCalSingleYearButton")}if(e.getVisible()&&!e._getVisibleButton3()){this._isTwoMonthsInTwoColumns()&&e.$().find(".sapUiCalHeadB4").addClass("sapUiCalSingleYearButton")}}.bind(this)}};Y.prototype._initializeSecondMonthHeader=function(){var e=new g(this.getId()+"--SecondMonthHead",{visible:false});e.addStyleClass("sapUiCalHeadSecondMonth");e.attachEvent("pressPrevious",this._handlePrevious,this);e.attachEvent("pressNext",this._handleNext,this);e.attachEvent("pressButton1",this._handleButton1,this);e.attachEvent("pressButton2",this._handleButton2,this);this._afterSecondHeaderRenderAdjustCSS=this._createOnAfterRenderingDelegate(e);e.addDelegate(this._afterSecondHeaderRenderAdjustCSS);this.setAggregation("secondMonthHeader",e)};Y.prototype._initializeMonthPicker=function(){var e=new d(this.getId()+"--MP");e._bCalendar=true;e.attachEvent("select",this._selectMonth,this);e.attachEvent("pageChange",O,this);e._bNoThemeChange=true;this.setAggregation("monthPicker",e);e._setSelectedDatesControlOrigin(this)};Y.prototype._initializeYearPicker=function(){var e=new u(this.getId()+"--YP");e._bCalendar=true;e.attachEvent("select",this._selectYear,this);e.attachEvent("pageChange",J,this);this.setAggregation("yearPicker",e);e._setSelectedDatesControlOrigin(this)};Y.prototype._initializeYearRangePicker=function(){var e=new c(this.getId()+"--YRP");e.attachEvent("select",this._selectYearRange,this);e.setPrimaryCalendarType(this._getPrimaryCalendarType());this.setAggregation("yearRangePicker",e);e._setSelectedDatesControlOrigin(this)};Y.prototype._createMonth=function(e){var t=new l(e,{width:"100%"});this._setMonthCalendarWeekNumbering(t);t._bCalendar=true;t.attachEvent("datehovered",this._handleDateHovered,this);t.attachEvent("weekNumberSelect",this._handleWeekNumberSelect,this);return t};Y.prototype._handleWeekNumberSelect=function(e){const t=e.getParameter("weekDays"),a=this.fireWeekNumberSelect({weekNumber:e.getParameter("weekNumber"),weekDays:t}),r=t?.getStartDate()&&t?.getStartDate().getMonth(),i=e.getSource().getDate()&&e.getSource().getDate().getMonth(),s=this.getAggregation("month"),o=_.fromLocalJSDate(s[0].getDate()),h=_.fromLocalJSDate(s[s.length-1].getDate());o.setDate(1);h.setDate(1);h.setMonth(h.getMonth()+1);h.setDate(0);const g=s.length>=2?!n._isBetween(_.fromLocalJSDate(e.getSource().getDate()),o,h,true):r!==i;t&&this._focusDate(_.fromLocalJSDate(t.getStartDate(),this._getPrimaryCalendarType()),g,false,false);if(!a){e.preventDefault()}return this};Y.prototype._handleDateHovered=function(e){var t=this.getAggregation("month"),a=e.getParameter("date1"),r=e.getParameter("date2"),i;for(i=0;i<t.length;i++){t[i]._markDatesBetweenStartAndHoveredDate(a,r)}};Y.prototype.onBeforeRendering=function(){var e=this.getAggregation("month"),t,a=e[0].getDate(),r=this._getFocusedDate();if(this.getFirstDayOfWeek()!==-1&&this.getCalendarWeekNumbering()!=="Default"){A.warning("Both properties firstDayOfWeek and calendarWeekNumbering should not be used at the same time!")}if(e.length>1&&a){t=_.fromLocalJSDate(a,this._getPrimaryCalendarType())}else if(e.length>1){t=B.call(this,this._getFocusedDate())}else{t=r}for(var i=0;i<e.length;i++){a=new _(t);if(i>0){a.setMonth(a.getMonth()+i,1)}var s=a;if(r.getYear()===a.getYear()&&r.getMonth()===a.getMonth()){s=r}e[i].displayDate(s.toLocalJSDate());e[i].setShowWeekNumbers(this.getShowWeekNumbers())}if(this._getMonthPicker()){this._setDisabledMonths(r.getYear(),this._getMonthPicker())}this._updateHeader(t);this._updateHeadersButtons();this._adjustYearRangeDisplay();this._updateLegendParent();if(this.getInitialFocusedDate()){this._oFocusedDate=_.fromLocalJSDate(this.getInitialFocusedDate(),this._getPrimaryCalendarType())}};Y.prototype.onAfterRendering=function(e){if(!this._getSucessorsPickerPopup()){w.call(this)}if(x.call(this)>1||this._bInitMonth){e.size={width:this.getDomRef().offsetWidth};H.call(this,e,true);if(!this._sResizeListener){this._sResizeListener=P.register(this,this._resizeProxy)}this._bInitMonth=undefined}};Y.prototype.removeSelectedDate=function(e){this._bDateRangeChanged=true;return this.removeAggregation("selectedDates",e)};Y.prototype.removeAllSelectedDates=function(){this._bDateRangeChanged=true;var e=this.removeAllAggregation("selectedDates");return e};Y.prototype.destroySelectedDates=function(){this._bDateRangeChanged=true;var e=this.destroyAggregation("selectedDates");return e};Y.prototype.removeAllSpecialDates=function(){this._bDateRangeChanged=true;var e=this.removeAllAggregation("specialDates");return e};Y.prototype.destroySpecialDates=function(){this._bDateRangeChanged=true;var e=this.destroyAggregation("specialDates");return e};Y.prototype._setSpecialDatesControlOrigin=function(e){this._oSpecialDatesControlOrigin=e};Y.prototype._getCalendarWeekNumbering=function(){if(this.isPropertyInitial("calendarWeekNumbering")){return}return this.getCalendarWeekNumbering()};Y.prototype.getSpecialDates=function(){var e=this.getParent();if(this._oSpecialDatesControlOrigin){return this._oSpecialDatesControlOrigin.getSpecialDates()}if(e&&e.getSpecialDates){return e.getSpecialDates()}else{return this.getAggregation("specialDates",[])}};Y.prototype.removeAllDisabledDates=function(){this._bDateRangeChanged=true;var e=this.removeAllAggregation("disabledDates");return e};Y.prototype.destroyDisabledDates=function(){this._bDateRangeChanged=true;var e=this.destroyAggregation("disabledDates");return e};Y.prototype.setLocale=function(e){if(this._sLocale!=e){this._sLocale=e;this._oLocaleData=undefined;this.invalidate();this._toggleTwoMonthsInColumnsCSS()}return this};Y.prototype.getLocale=function(){if(!this._sLocale){this._sLocale=new M(e.getLanguageTag()).toString()}return this._sLocale};Y.prototype._getFocusedDate=function(){if(!this._oFocusedDate){R.call(this)}return this._oFocusedDate};Y.prototype._setFocusedDate=function(e){n._checkCalendarDate(e);this._oFocusedDate=new _(e,this._getPrimaryCalendarType())};Y.prototype.focusDate=function(e){E.call(this,e,false);this._addMonthFocusDelegate();return this};Y.prototype.displayDate=function(e){E.call(this,e,true);return this};Y.prototype.getStartDate=function(){var e;if(this.getDomRef()){var t=this.getAggregation("month");e=_.fromLocalJSDate(t[0].getDate(),this._getPrimaryCalendarType())}else{e=new _(this._getFocusedDate())}e.setDate(1);return e.toLocalJSDate()};Y.prototype.setCalendarWeekNumbering=function(e){var t=this.getAggregation("month");this.setProperty("calendarWeekNumbering",e);for(var a=0;a<t.length;a++){this._setMonthCalendarWeekNumbering(t[a])}return this};Y.prototype._setMonthCalendarWeekNumbering=function(e){if(this.isPropertyInitial("calendarWeekNumbering")){return this}return e.setCalendarWeekNumbering(this.getCalendarWeekNumbering())};Y.prototype.setMonths=function(e){this._bDateRangeChanged=undefined;this.setProperty("months",e);e=x.call(this);var t=this.getAggregation("month");var a=0;var r;if(t.length<e){for(a=t.length;a<e;a++){r=this._createMonth(this.getId()+"--Month"+a);r.attachEvent("focus",this._handleFocus,this);r.attachEvent("select",L,this);r.attachEvent("_renderMonth",N,this);r.attachEvent("_bindMousemove",F,this);r.attachEvent("_unbindMousemove",I,this);r._bNoThemeChange=true;r.setSecondaryCalendarType(this._getSecondaryCalendarType());this._setMonthCalendarWeekNumbering(r);this.addAggregation("month",r)}this._toggleTwoMonthsInColumnsCSS()}else if(t.length>e){for(a=t.length;a>e;a--){r=this.removeAggregation("month",a-1);r.destroy()}if(e==1){this._bInitMonth=true}this._toggleTwoMonthsInColumnsCSS()}if(e>1&&t[0].getDate()){t[0].setProperty("date",null,true)}t=this.getAggregation("month");t.forEach(t=>t.setProperty("_renderMonthWeeksOnly",e>1));return this};Y.prototype.setPrimaryCalendarType=function(e){var t=this.getAggregation("month"),a,r,i,s,o;this.setProperty("primaryCalendarType",e);this._oYearFormat=m.getDateInstance({format:"y",calendarType:e});if(this._oFocusedDate){this._oFocusedDate=new _(this._oFocusedDate,e)}this._oMinDate=new _(this._oMinDate,e);this._oMaxDate=new _(this._oMaxDate,e);for(o=0;o<t.length;o++){a=t[o];a.setPrimaryCalendarType(e)}if(!this._getSucessorsPickerPopup()){r=this._getMonthPicker();r.setPrimaryCalendarType(e);i=this._getYearPicker();i.setPrimaryCalendarType(e);s=this.getAggregation("yearRangePicker");s.setPrimaryCalendarType(e)}return this};Y.prototype.setSecondaryCalendarType=function(e){var t=e?2:3,a=this._getMonthPicker();this.setProperty("secondaryCalendarType",e);this._oYearFormatSecondary=m.getDateInstance({format:"y",calendarType:e});var r=this.getAggregation("month");for(var i=0;i<r.length;i++){var s=r[i];s.setSecondaryCalendarType(e)}a.setSecondaryCalendarType(e);a.setColumns(t);this._getYearPicker().setSecondaryCalendarType(e);this._getYearRangePicker().setSecondaryCalendarType(e);return this};Y.prototype._getPrimaryCalendarType=function(){return this.getProperty("primaryCalendarType")||e.getCalendarType()};Y.prototype._getSecondaryCalendarType=function(){var e=this.getSecondaryCalendarType();if(e===this._getPrimaryCalendarType()){return undefined}return e};Y.prototype._getActiveHeaderAggregation=function(){if(this._bActionTriggeredFromSecondHeader&&this._isTwoMonthsInOneColumn()){return this.getAggregation("secondMonthHeader")}else{return this.getAggregation("header")}};Y.prototype._saveTriggeredHeader=function(e){if(e.getSource().sParentAggregationName==="secondMonthHeader"||e.sId==="pressButton3"||e.sId==="pressButton4"){this._bActionTriggeredFromSecondHeader=true}else{this._bActionTriggeredFromSecondHeader=false}};Y.prototype.setMinDate=function(e){var t=this.getAggregation("month"),a=this._getPrimaryCalendarType(),r;if(S(e,this.getMinDate())){return this}if(!e){this._oMinDate=n._minDate(a)}else{n._checkJSDateObject(e);this._oMinDate=_.fromLocalJSDate(e,a);var i=this._oMinDate.getYear();n._checkYearInValidRange(i,a);if(this._oMaxDate.isBefore(this._oMinDate)){A.warning("minDate > maxDate -> maxDate set to end of the month",this);this._oMaxDate=_.fromLocalJSDate(e,a);this._oMaxDate.setDate(n._daysInMonth(this._oMaxDate));this.setProperty("maxDate",this._oMaxDate.toLocalJSDate(),true)}this._setMinMaxDateExtend(_.fromLocalJSDate(e,a))}this.setProperty("minDate",e,false);if(!this._getSucessorsPickerPopup()){r=this._oMinDate.getYear();this._getYearPicker()._oMinDate.setYear(r);this._getYearRangePicker()._oMinDate.setYear(r)}for(var s=0;s<t.length;s++){t[s]._oMinDate=new _(this._oMinDate)}return this};Y.prototype.setMaxDate=function(e){var t=this.getAggregation("month"),a=this._getPrimaryCalendarType(),r;if(S(e,this.getMaxDate())){return this}if(!e){this._oMaxDate=n._maxDate(a)}else{n._checkJSDateObject(e);this._oMaxDate=_.fromLocalJSDate(e,a);var i=this._oMaxDate.getYear();n._checkYearInValidRange(i,a);if(this._oMinDate.isAfter(this._oMaxDate)){A.warning("maxDate < minDate -> minDate set to begin of the month",this);this._oMinDate=_.fromLocalJSDate(e,a);this._oMinDate.setDate(1);this.setProperty("minDate",this._oMinDate.toLocalJSDate(),true)}this._setMinMaxDateExtend(_.fromLocalJSDate(e,a))}this.setProperty("maxDate",e,false);if(!this._getSucessorsPickerPopup()){r=this._oMaxDate.getYear();this._getYearPicker()._oMaxDate.setYear(r);this._getYearRangePicker()._oMaxDate.setYear(r)}for(var s=0;s<t.length;s++){t[s]._oMaxDate=new _(this._oMaxDate)}return this};Y.prototype.setShowCurrentDateButton=function(e){this.getAggregation("header").setVisibleCurrentDateButton(e);return this.setProperty("showCurrentDateButton",e)};Y.prototype.setIntervalSelection=function(e){const t=this._getMonthPicker();if(t){t._setShowSelectedRange(e)}const a=this._getYearPicker();if(a){a._setShowSelectedRange(e)}const r=this._getYearRangePicker();if(r){r._setShowSelectedRange(e)}return this.setProperty("intervalSelection",e)};Y.prototype.setSingleSelection=function(e){const t=this._getMonthPicker();if(t){t.setProperty("_singleSelection",e)}const a=this._getYearPicker();if(a){a.setProperty("_singleSelection",e)}const r=this._getYearRangePicker();if(r){r.setProperty("_singleSelection",e)}return this.setProperty("singleSelection",e)};Y.prototype._setMinMaxDateExtend=function(e){if(this._oFocusedDate){if(n._isOutside(this._oFocusedDate,this._oMinDate,this._oMaxDate)){A.warning("focused date is not between [minDate - maxDate] -> refocus to the new max/min date: "+e.toString(),this);this.focusDate(e.toLocalJSDate())}}};Y.prototype._getLocaleData=function(){if(!this._oLocaleData){var e=this.getLocale();var t=new M(e);this._oLocaleData=s.getInstance(t)}return this._oLocaleData};Y.prototype._getShowMonthHeader=function(){var e=x.call(this);if(e>2){return true}else{return false}};Y.prototype._getMonthPicker=function(){return this.getAggregation("monthPicker")};Y.prototype._getYearPicker=function(){return this.getAggregation("yearPicker")};Y.prototype._getYearRangePicker=function(){return this.getAggregation("yearRangePicker")};Y.prototype.onclick=function(e){var t=e.target;if(e.isMarked("delayedMouseEvent")){return}if(t.id==this.getId()+"-cancel"){this.onsapescape(e)}};Y.prototype.onmousedown=function(e){if(e.cancelable){e.preventDefault()}e.setMark("cancelAutoClose")};Y.prototype.onsapescape=function(e){this.fireCancel();this._closePickers();this._addMonthFocusDelegate();if(!this._getSucessorsPickerPopup()){this._setHeaderText(this._getFocusedDate())}};Y.prototype.onsapshow=function(e){var t=e.which||e.keyCode;if(this._bPoupupMode&&t!==T.F4){this._closePickers();this._addMonthFocusDelegate();this.fireCancel();e.preventDefault()}};Y.prototype.onkeydown=function(e){var t=e.which||e.keyCode,a=e.shiftKey;if(t!==T.F4){return}e.preventDefault();switch(this._iMode){case 0:if(a){this._showYearPicker()}else{this._showMonthPicker()}break;case 1:if(a){this._showYearPicker()}break;case 2:if(a){this._showYearRangePicker()}break;default:}};Y.prototype.onsaphide=Y.prototype.onsapshow;Y.prototype.getFocusDomRef=function(){var e=this._oSelectedMonth?this._oSelectedMonth:this.getAggregation("month")[0],t=this._getMonthPicker(),a=this._getYearPicker(),r=this._getYearRangePicker();switch(this._iMode){case 0:return e.getFocusDomRef();case 1:return t.getFocusDomRef();case 2:return a.getFocusDomRef();case 3:return r.getFocusDomRef();default:return}};Y.prototype.onThemeChanged=function(){var e,t=arguments;if(!this.getDomRef()){return}this._bNamesLengthChecked=undefined;if(!this._getSucessorsPickerPopup()){var a={onAfterRendering:function(){e.onThemeChanged(t);e._bNoThemeChange=true;w.call(this);this._bLongMonth=e._bLongMonth;this._closePickers();e.removeEventDelegate(a)}};e=this._getMonthPicker();this._showMonthPicker(true);e._bNoThemeChange=false;e.addEventDelegate(a,this)}var r=this.getAggregation("month");for(var i=0;i<r.length;i++){var s=r[i];s._bNoThemeChange=false;s.onThemeChanged(arguments);s._bNoThemeChange=true}var o;if(r.length>1){o=_.fromLocalJSDate(r[0].getDate(),this._getPrimaryCalendarType())}else{o=this._getFocusedDate()}this._setHeaderText(o);this._setPrimaryHeaderMonthButtonText();this._toggleTwoMonthsInColumnsCSS()};Y.prototype._updateLegendParent=function(){var e=this.getLegend(),t=i.getElementById(e);t&&t._setParent(this)};Y.prototype._updateHeader=function(e){this._setHeaderText(e);switch(this._iMode){case 0:this._togglePrevNext(e,true);break;case 1:this._togglePrevNext(e,false);break;case 2:case 3:this._togglePrevNexYearPicker();break}};Y.prototype._togglePrevNext=function(e,t){var a=this._oMaxDate.getYear();var r=this._oMinDate.getYear();var i=this._oMaxDate.getMonth();var s=this._oMinDate.getMonth();var o=this.getAggregation("header");var h=x.call(this);var g=new _(e,this._getPrimaryCalendarType());if(this._iMode===1&&h>1){g=B.call(this,e);g.setMonth(g.getMonth()+h-1);g.setDate(n._daysInMonth(g))}else{g.setDate(n._daysInMonth(g))}var l=g.getYear();var d=g.getMonth();if((this._iMode===0||this._iMode===1)&&h>1){d+=h-1}if(l>a||l===a&&(!t||d>=i)||(this._iMode===0||this._iMode===1)&&this._getSucessorsPickerPopup()){o.setEnabledNext(false)}else{o.setEnabledNext(true)}if(this._iMode===1&&h>1){g.setMonth(g.getMonth()-h+1,1)}else{g.setDate(1)}l=g.getYear();d=g.getMonth();if(l<r||l==r&&(!t||d<=s)||this._iMode==1&&this._getSucessorsPickerPopup()){o.setEnabledPrevious(false)}else{o.setEnabledPrevious(true)}};Y.prototype._togglePrevNexYearPicker=function(){var e=this.getAggregation("yearRangePicker"),t=this._getYearPicker(),a=this._getPrimaryCalendarType(),r=new _(this._oMinDate,a),i=new _(this._oMaxDate,a),s=this.getAggregation("header"),o=1,n,h,g,l;if(this._iMode===3){g=e.getYears();o=e.getRangeSize();n=new _(e.getProperty("_middleDate"));h=new _(n);n.setYear(n.getYear()-o*g/2);h.setYear(h.getYear()+o*g/2-1)}else{g=t.getYears();l=t.getProperty("_middleDate")?t.getProperty("_middleDate"):_.fromLocalJSDate(f.getInstance());n=new _(l);h=new _(l);n.setYear(n.getYear()-g/2);h.setYear(h.getYear()+g/2-1)}s.setEnabledNext(h.getYear()<i.getYear());s.setEnabledPrevious(n.getYear()>r.getYear())};Y.prototype._handlePrevious=function(){var e=this._getFocusedDate(),t=x.call(this),a,r=false;switch(this._iMode){case 0:if(t>1){a=_.fromLocalJSDate(this.getAggregation("month")[0].getDate(),this._getPrimaryCalendarType());a.setDate(1);this._setFocusedDate(a);e=this._getFocusedDate()}else{e.setDate(1)}e.setDate(e.getDate()-1);this._renderMonth(r,false);this._addMonthFocusDelegate();break;case 1:e.setYear(e.getYear()-1);this._updateHeadersYearPrimaryText(this._oYearFormat.format(e.toUTCJSDate(),true));this._updateHeadersYearAdditionalTextHelper();this._togglePrevNext(e);this._setDisabledMonths(e.getYear());var i=this._getMonthPicker();i._setYear(e.getYear());i._setDate(e);i.invalidate();this.setProperty("_currentPicker",b.MONTH_PICKER);this._setHeaderCurrentPicker(b.MONTH_PICKER);break;case 2:this._getYearPicker().previousPage();this._togglePrevNexYearPicker();this._updateHeadersYearPrimaryText(this._getYearString());this._updateHeadersYearAdditionalTextHelper();break;case 3:this.getAggregation("yearRangePicker").previousPage();this._togglePrevNexYearPicker();this._updateHeadersYearPrimaryText(this._getYearString());break}};Y.prototype._handleNext=function(){var e=this._getFocusedDate(),t=x.call(this),a;switch(this._iMode){case 0:if(t>1){a=_.fromLocalJSDate(this.getAggregation("month")[0].getDate(),this._getPrimaryCalendarType());a.setMonth(a.getMonth(),1);this._setFocusedDate(a);e=this._getFocusedDate()}e.setMonth(e.getMonth()+1,1);this._renderMonth(false,false);this._addMonthFocusDelegate();break;case 1:e.setYear(e.getYear()+1);this._updateHeadersYearPrimaryText(this._oYearFormat.format(e.toUTCJSDate(),true));this._updateHeadersYearAdditionalTextHelper();this._togglePrevNext(e);this._setDisabledMonths(e.getYear());var r=this._getMonthPicker();r._setYear(e.getYear());r._setDate(e);r.invalidate();this.setProperty("_currentPicker",b.MONTH_PICKER);this._setHeaderCurrentPicker(b.MONTH_PICKER);break;case 2:this._getYearPicker().nextPage();this._togglePrevNexYearPicker();this._updateHeadersYearPrimaryText(this._getYearString());this._updateHeadersYearAdditionalTextHelper();break;case 3:this.getAggregation("yearRangePicker").nextPage();this._togglePrevNexYearPicker();this._updateHeadersYearPrimaryText(this._getYearString());break}};Y.prototype._getSecondaryYearText=function(){if(!this._getSecondaryCalendarType()){return""}const e=this._getDisplayedSecondaryYears();let t="";if(!e||!e.start||!e.end){return""}if(e.start.getYear()===e.end.getYear()){t=this._oYearFormatSecondary.format(e.start.toUTCJSDate(),true)}else{const a=this._getLocaleData().getIntervalPattern();t=a.replace(/\{0\}/,this._oYearFormatSecondary.format(e.start.toUTCJSDate(),true)).replace(/\{1\}/,this._oYearFormatSecondary.format(e.end.toUTCJSDate(),true))}return t};Y.prototype._updateHeadersYearAdditionalTextHelper=function(){if(!this._getSecondaryCalendarType()){return}this._updateHeadersYearAdditionalText(this._getSecondaryYearText())};Y.prototype._handleCurrentDate=function(){const e=f.getInstance(),t=this.getMaxDate(),a=this.getMinDate();this.setProperty("_currentPicker",b.MONTH);this._setHeaderCurrentPicker(b.MONTH);if(t&&t.getTime()<e.getTime()){this.focusDate(t)}else if(a&&a.getTime()>e.getTime()){this.focusDate(a)}else{this.focusDate(e)}};Y.prototype._setHeaderCurrentPicker=function(e){const t=this.getAggregation("header");try{t.setProperty("_currentPicker",e)}catch(e){A.warning("Property '_currentPicker' could not be set on the header aggregation.")}};Y.prototype._getYearString=function(){var e=this._getYearPicker(),t=e.getDomRef(),a=this._getFocusedDate();if(e&&t&&t.style.display===""){a=e.getProperty("_middleDate");a.setDate(1)}return this._oYearFormat.format(p.getInstance(a.toUTCJSDate(),a.getCalendarType()),true)};Y.prototype._getDisplayedMonths=function(e){var t=[];var a=e.getMonth();var r=x.call(this);if(r>1){for(var i=0;i<r;i++){t.push((a+i)%12)}}else{t.push(a)}return t};Y.prototype._getDisplayedSecondaryMonths=function(){var e=this._getPrimaryCalendarType(),t=this._getSecondaryCalendarType(),a=this.getAggregation("month"),r=_.fromLocalJSDate(a[0].getDate(),e),i=_.fromLocalJSDate(a[a.length-1].getDate(),e),s,o;r.setDate(1);r=new _(r,t);s=r.getMonth();i=_.fromLocalJSDate(a[a.length-1].getDate(),e);i.setDate(n._daysInMonth(i));i=new _(i,t);o=i.getMonth();return{start:s,end:o}};Y.prototype._getDisplayedSecondaryYears=function(){var e=this._getPrimaryCalendarType(),t=this._getSecondaryCalendarType(),a,r,i,s,o,h,g;switch(this._iMode){case 0:o=this.getAggregation("month");a=_.fromLocalJSDate(o[0].getDate(),e);a.setDate(1);a=new _(a,t);r=_.fromLocalJSDate(o[o.length-1].getDate(),e);r.setDate(n._daysInMonth(r));r=new _(r,t);break;case 1:i=this._getFocusedDate();s=new _(i,e);s.setMonth(0,1);a=new _(s,e);a=new _(a,t);s.setYear(s.getYear()+1);s.setDate(s.getDate()-1);r=new _(s,e);r=new _(r,t);break;case 2:h=this._getYearPicker();g=h.getYears()/2-1;i=h.getProperty("_middleDate");a=new _(i,e);a.setYear(i.getYear()-g-1);a.setMonth(0,1);a=new _(a,t);r=new _(i,e);r.setYear(r.getYear()+g+1);a.setMonth(0,1);r.setDate(r.getDate()-1);r=new _(r,t);break;default:}return{start:a,end:r}};Y.prototype._closePickers=function(){this.setProperty("_currentPicker",b.MONTH);this._setHeaderCurrentPicker(b.MONTH);this._togglePrevNext(this._getFocusedDate(),true);if(this.getAggregation("month").length>1){this.getAggregation("month").forEach(function(e){e._oItemNavigation.iActiveTabIndex=0})}};Y.prototype._setDisabledMonths=function(e,t){var a=0;var r=11;if(e===this._oMinDate.getYear()){a=this._oMinDate.getMonth()}if(e===this._oMaxDate.getYear()){r=this._oMaxDate.getMonth()}if(!t){t=this._getMonthPicker()}t.setMinMax(a,r)};Y.prototype._handleFocus=function(e){var t=_.fromLocalJSDate(e.getParameter("date"),this._getPrimaryCalendarType()),a=e.getParameter("otherMonth"),r=e.getParameter("restoreOldDate");if(this.getIntervalSelection()){this.getAggregation("month").forEach(function(e){e.setProperty("_focusedDate",t)})}if(r){if(!S(this._getFocusedDate(),t)){this._renderMonth(false,true)}}else{this._focusDate(t,a,false,true)}};Y.prototype._getVisibleDays=function(){var e=this.getAggregation("month")[0];return e._getVisibleDays(e._getDate(),false)};Y.prototype._renderMonth=function(e,t){var a=this._getFocusedDate(),r=this.getAggregation("month"),i,s,o=B.call(this,new _(a,this._getPrimaryCalendarType())),h=0,g=r[0].checkDateFocusable(a.toLocalJSDate()),l=!t&&!g;for(h=0;h<r.length;h++){i=r[h];s=new _(o,this._getPrimaryCalendarType());s.setMonth(o.getMonth()+h);if(!e&&n._isSameMonthAndYear(s,a)){i.setDate(a.toLocalJSDate())}else{i.displayDate(s.toLocalJSDate())}}this._updateHeader(o);this._setPrimaryHeaderMonthButtonText();this._toggleTwoMonthsInColumnsCSS();if(l){this.fireStartDateChange()}};Y.prototype._updateMonthButtonVisibility=function(){var e=this._getActiveHeaderAggregation();if(this._bActionTriggeredFromSecondHeader){this._isTwoMonthsInOneColumn()?e.setVisibleButton1(!e.getVisibleButton1()):e._setVisibleButton3(!e._getVisibleButton3())}else{e.setVisibleButton1(false)}return this};Y.prototype._showMonthPicker=function(e){var t=this._getFocusedDate(),a=this._getMonthPicker(),r=new _(this._getFocusedDate());this._updateActiveHeaderYearButtonVisibility();this._updateMonthButtonVisibility();this.setProperty("_currentPicker",b.MONTH_PICKER);this._setHeaderCurrentPicker(b.MONTH_PICKER);if(this._bActionTriggeredFromSecondHeader){r.setDate(1);r.setMonth(r.getMonth()+1);a._setYear(r.getYear());a._setDate(r)}else{a._setYear(t.getYear());a._setDate(t)}if(!e&&this._bActionTriggeredFromSecondHeader){a.setMonth(r.getMonth());this._setDisabledMonths(r.getYear(),a)}else if(!e){a.setMonth(t.getMonth());this._setDisabledMonths(t.getYear(),a)}if(this.getAggregation("month").length>1&&this.getProperty("_currentPicker")==b.MONTH_PICKER){this.getAggregation("month").forEach(function(e){e._oItemNavigation.iActiveTabIndex=-1})}this._togglePrevNext(t,true);this._setHeaderText(this._getFocusedDate())};Y.prototype._showYearPicker=function(){const e=this._getFocusedDate(),t=this._getYearPicker();this.setProperty("_currentPicker",b.YEAR_PICKER);this._setHeaderCurrentPicker(b.YEAR_PICKER);t.setDate(e.toLocalJSDate());this._togglePrevNexYearPicker();if(this._isTwoMonthsInOneColumn()){this._updateActiveHeaderYearButtonVisibility()}else{this._updateActiveHeaderYearButtonVisibility()}if(this._bActionTriggeredFromSecondHeader&&this.getAggregation("month")[1].getDate().getFullYear()>this._getFocusedDate().getYear()){var a=e.toLocalJSDate();a.setFullYear(a.getFullYear()+1);t.setDate(a);this._updateHeadersYearPrimaryText(this._getYearString())}else{t.setDate(e.toLocalJSDate());this._updateHeadersYearPrimaryText(this._getYearString())}if(this.getAggregation("month").length>1&&this.getProperty("_currentPicker")==b.YEAR_PICKER){this.getAggregation("month").forEach(function(e){e._oItemNavigation.iActiveTabIndex=-1})}};Y.prototype._focusDate=function(e,t,a,r){var i,s=false,o=false,n=this.getAggregation("month"),h;if(e.isBefore(this._oMinDate)){i=this._oMinDate;s=true}else if(e.isAfter(this._oMaxDate)){i=this._oMaxDate;s=true}else{i=e}if(this._focusDateExtend){o=this._focusDateExtend(e,t,a)}this._setFocusedDate(i);if(r&&!this._focusDateExtend){for(h=0;h<n.length;++h){if(n[h].checkDateFocusable(i.toLocalJSDate())){n[h].setDate(i.toLocalJSDate());n[h]._focusDate(i);return}}}if(s||t){this._renderMonth(false,a);this._addMonthFocusDelegate()}if(o){this.fireStartDateChange()}};Y.prototype._setHeaderText=function(e){var t=this.getAggregation("header");var a=this.getAggregation("secondMonthHeader");var r=this._getLocaleData();var i=[];var s=[];var o=[];var n=[];var h;var g=false;var l;var d;var u;var c;var p;var f=this._getPrimaryCalendarType();var y=this._getSecondaryCalendarType();var D="";if(this._bLongMonth||!this._bNamesLengthChecked){i=r.getMonthsStandAlone("wide",f)}else{g=true;i=r.getMonthsStandAlone("abbreviated",f);s=r.getMonthsStandAlone("wide",f)}if(y){o=r.getMonthsStandAlone("abbreviated",y);n=r.getMonthsStandAlone("wide",y);var m=this._getDisplayedSecondaryMonths();if(m.start===m.end){u=o[m.start];D=n[m.start]}else{p=r.getIntervalPattern();u=p.replace(/\{0\}/,o[m.start]).replace(/\{1\}/,o[m.end]);D=p.replace(/\{0\}/,n[m.start]).replace(/\{1\}/,n[m.end])}}t.setAdditionalTextButton1(u);t._setAdditionalTextButton3(u);a.setAdditionalTextButton1(u);var P=this._getDisplayedMonths(e);this._sFirstMonthName=l=i[P[0]];d=i[P[P.length-1]];if(P.length>1&&!this._bShowOneMonth){if(!p){p=r.getIntervalPattern()}u=p.replace(/\{0\}/,l).replace(/\{1\}/,d);h=s.length?p.replace(/\{0\}/,s[P[0]]).replace(/\{1\}/,s[P[P.length-1]]):u;if(this._isTwoMonthsInTwoColumns()||this._isTwoMonthsInOneColumn()){u=l}}else{u=l;h=s[P[0]]||u}if(!this._getSucessorsPickerPopup()&&D){h+=", "+D}var M=this._oResourceBundle.getText("CALENDAR_HEADER_MONTH_BUTTON",[h]);var T=this._oResourceBundle.getText("CALENDAR_HEADER_MONTH_BUTTON_SHORTCUT");var C=`${this._oResourceBundle.getText("CALENDAR_HEADER_MONTH_BUTTON",[h])} (${T})`;t.setTextButton1(u);t.setAriaLabelButton1(M);t.setProperty("_tooltipButton1",C);t.setProperty("_descriptionButton1",M);t._setTextButton3(d);if(P.length>1){var v=this._oResourceBundle.getText("CALENDAR_HEADER_MONTH_BUTTON",[d]);var S=`${this._oResourceBundle.getText("CALENDAR_HEADER_MONTH_BUTTON",[d])} (${T})`;t._setAriaLabelButton3(v);t.setProperty("_tooltipButton3",S);t.setProperty("_keyShortcutButton3",T);t.setProperty("_descriptionButton3",v)}a.setTextButton1(d);if(P.length>1){var A=this._oResourceBundle.getText("CALENDAR_HEADER_MONTH_BUTTON",[d]);var k=`${this._oResourceBundle.getText("CALENDAR_HEADER_MONTH_BUTTON",[d])} (${T})`;a.setAriaLabelButton1(A);a.setProperty("_tooltipButton1",k);a.setProperty("_keyShortcutButton1",T);a.setProperty("_descriptionButton1",A)}var Y=new _(e,f);Y.setDate(1);c=this._oYearFormat.format(Y.toUTCJSDate(),true);if(Y.getMonth()===11){this._updateHeadersYearPrimaryText(c,(parseInt(c)+1).toString())}else{this._updateHeadersYearPrimaryText(c,c)}if(y&&this._iMode!==3){this._updateHeadersYearAdditionalTextHelper()}else{this._updateHeadersYearAdditionalText()}return{sMonth:u,sYear:c,sAriaLabel:h,bShort:g}};Y.prototype._handleButton1=function(e){if(this._iMode!=1){this._saveTriggeredHeader(e);this._showMonthPicker()}else{this.setProperty("_currentPicker",b.MONTH);this._setHeaderCurrentPicker(b.MONTH);this._addMonthFocusDelegate()}};Y.prototype._addMonthFocusDelegate=function(){var e=this.getAggregation("month"),t=e[0].getDate(),a=this._getFocusedDate(),r={onAfterRendering:function(){this._oItemNavigation.focusItem(this._oItemNavigation.getFocusedIndex(),undefined,true);this.removeDelegate(r)}},i,s;if(e.length>1&&i){t=_.fromLocalJSDate(i,this._getPrimaryCalendarType())}else if(e.length>1){t=B.call(this,this._getFocusedDate())}else{t=a}for(var o=0;o<e.length;o++){i=new _(t);if(o>0){i.setMonth(i.getMonth()+o,1)}if(a.getYear()===i.getYear()&&a.getMonth()===i.getMonth()){s=this.getAggregation("month")[o];s.addDelegate(r,s)}}};Y.prototype._handleButton2=function(e){if(this._iMode<=1){this._saveTriggeredHeader(e);this._showYearPicker()}else{this._showYearRangePicker()}};Y.prototype._selectMonth=function(){var e=new _(this._getFocusedDate(),this._getPrimaryCalendarType()),t=this._getMonthPicker(),a=t.getProperty("_focusedMonth"),r=a||a===0?a:t.getMonth(),i=_.fromLocalJSDate(f.getInstance(),this._getPrimaryCalendarType());i=t._iYear?i.setYear(t._iYear).setMonth(r-1,1):new _(this._getFocusedDate().getYear(),r-1,1);if(x.call(this)>1){if(this._bActionTriggeredFromSecondHeader&&i.getYear()>=n._minDate(this._getPrimaryCalendarType()).getYear()){e.setYear(i.getYear());r=i.getMonth()}else if(e.getYear()===n._maxDate(this._getPrimaryCalendarType()).getYear()&&r===11){r-=1}}e.setMonth(r);if(r!=e.getMonth()){e.setDate(0)}this._focusDate(e,true,false,false);this._closePickers();this._addMonthFocusDelegate()};Y.prototype._getSucessorsPickerPopup=function(){return this.getPickerPopup&&this.getPickerPopup()};Y.prototype._selectYear=function(){var e=new _(this._getFocusedDate(),this._getPrimaryCalendarType()),t=e.getMonth(),a=this._getYearPicker(),r=_.fromLocalJSDate(a.getDate(),this._getPrimaryCalendarType());if(!this._bActionTriggeredFromSecondHeader){r.setMonth(t,e.getDate())}else{r.setYear(t===11?r.getYear()-1:r.getYear());r.setMonth(t,e.getDate())}e=r;this._focusDate(e,true,false,false);this._closePickers();this._addMonthFocusDelegate();this._setHeaderText(this._getFocusedDate())};Y.prototype.setProperty=function(){var e=arguments[0],t=arguments[1];r.prototype.setProperty.apply(this,arguments);if(e==="_currentPicker"){switch(t){case"month":this._iMode=0;break;case"monthPicker":this._iMode=1;break;case"yearPicker":this._iMode=2;break;case"yearRangePicker":this._iMode=3;break;default:return}}return this};Y.prototype._selectYearRange=function(){var e=this.getAggregation("yearRangePicker"),t=this.getAggregation("header"),a=e.getRangeSize(),r=this._getPrimaryCalendarType(),i=_.fromLocalJSDate(e.getDate(),r),s=new _(i.getYear()+a-1,0,1,r),o=this._getFocusedDate(),n,h;o.setYear(i.getYear()+a/2);i.setMonth(0,1);if(o.isBefore(this._oMinDate)){o=new _(this._oMinDate,this._getPrimaryCalendarType())}else if(o.isAfter(this._oMaxDate)){o=new _(this._oMaxDate,this._getPrimaryCalendarType())}this._setFocusedDate(o);this._showYearPicker();n=this._oYearFormat.format(p.getInstance(i.toUTCJSDate(),i.getCalendarType()),true);h=this._oYearFormat.format(p.getInstance(s.toUTCJSDate(),s.getCalendarType()),true);t.setTextButton2(n+" - "+h);t._setTextButton4(n+" - "+h)};Y.prototype._showYearRangePicker=function(){var e=this.getAggregation("yearRangePicker"),t=this._getYearPicker(),a=_.fromLocalJSDate(t.getFirstRenderedDate(),this._getPrimaryCalendarType());this.setProperty("_currentPicker",b.YEAR_RANGE_PICKER);this._setHeaderCurrentPicker(b.YEAR_RANGE_PICKER);e.getColumns()%2!==0?a.setYear(a.getYear()+Math.floor(e.getRangeSize()/2)):a.setYear(a.getYear());e.setDate(a.toLocalJSDate());this._togglePrevNexYearPicker()};Y.prototype._setColumns=function(e){this._iColumns=e;return this};Y.prototype._getColumns=function(){return this._iColumns};Y.prototype._updateActiveHeaderYearButtonVisibility=function(){var e=this._getActiveHeaderAggregation();if(this._bActionTriggeredFromSecondHeader){this._isTwoMonthsInOneColumn()?e.setVisibleButton1(!e.getVisibleButton1()):e._setVisibleButton3(!e._getVisibleButton3())}else{e.setVisibleButton1(!e.getVisibleButton1())}return this};Y.prototype._updateHeadersButtonsHelper=function(e,t,a,r){var i=this.getAggregation("header"),s=this.getAggregation("secondMonthHeader");i.setVisibleButton1(e);i.setVisibleButton2(t);i._setVisibleButton3(a);i._setVisibleButton4(r);if(s.getVisible()){s.setVisibleButton1(e);s.setVisibleButton2(t);s._setVisibleButton3(a);s._setVisibleButton4(r)}};Y.prototype._updateHeadersButtons=function(){var e=this.getAggregation("secondMonthHeader");if(this._isTwoMonthsInOneColumn()){e.setVisible(true);if(this._iMode===2){this._updateHeadersButtonsHelper(false,true,false,false)}else if(this._iMode===3){this._updateHeadersButtonsHelper(false,false,false,false)}else{this._updateHeadersButtonsHelper(true,true,false,false)}}else if(this._isTwoMonthsInTwoColumns()){e.setVisible(false);if(this._iMode===2){this._bActionTriggeredFromSecondHeader?this._updateHeadersButtonsHelper(true,true,false,true):this._updateHeadersButtonsHelper(false,true,true,true)}else if(this._iMode===3){this._updateHeadersButtonsHelper(false,false,false,false)}else if(this._iMode===1){this._bActionTriggeredFromSecondHeader?this._updateHeadersButtonsHelper(true,true,false,true):this._updateHeadersButtonsHelper(false,true,true,true)}else{this._updateHeadersButtonsHelper(true,true,true,true)}}else{e.setVisible(false);if(this._iMode===1){this._updateHeadersButtonsHelper(false,true,false,false)}else if(this._iMode===2){this._updateHeadersButtonsHelper(false,true,false,false)}else if(this._iMode===3){this._updateHeadersButtonsHelper(false,false,false,false)}else{this._updateHeadersButtonsHelper(true,true,false,false)}}if(this._getSucessorsPickerPopup()){this.getAggregation("header").setVisibleButton2(false)}};Y.prototype._setPrimaryHeaderMonthButtonText=function(){var e=this.getAggregation("header");if(this._isTwoMonthsInOneColumn()||this._isTwoMonthsInTwoColumns()){e.setTextButton1(this._sFirstMonthName)}};Y.prototype._toggleTwoMonthsInColumnsCSS=function(){if(this._isTwoMonthsInTwoColumns()){if(new M(t.getLanguageTag()).getLanguage().toLowerCase()==="ja"||new M(t.getLanguageTag()).getLanguage().toLowerCase()==="zh"){this.addStyleClass("sapUiCalTwoMonthsTwoColumnsJaZh");this.removeStyleClass("sapUiCalTwoMonthsTwoColumns")}else{this.addStyleClass("sapUiCalTwoMonthsTwoColumns");this.removeStyleClass("sapUiCalTwoMonthsTwoColumnsJaZh")}}else{this.removeStyleClass("sapUiCalTwoMonthsTwoColumnsJaZh");this.removeStyleClass("sapUiCalTwoMonthsTwoColumns")}if(this._isTwoMonthsInOneColumn()){this.addStyleClass("sapUiCalTwoMonthsInOneColumn")}else{this.removeStyleClass("sapUiCalTwoMonthsInOneColumn")}};Y.prototype._isTwoMonthsInOneColumn=function(){var e=x.call(this);return this._getColumns()===1&&e===2};Y.prototype._isTwoMonthsInTwoColumns=function(){var e=x.call(this);return this._getColumns()===2&&e===2};Y.prototype._updateHeadersYearPrimaryText=function(e,t){var a=this._getYearPicker(),r=this._getMonthPicker(),i=this.getAggregation("header"),s=this.getAggregation("secondMonthHeader"),o=e,h=t||e,g=[o,this._getSecondaryYearText()].filter(Boolean).join(", "),l=[h,this._getSecondaryYearText()].filter(Boolean).join(", "),d=this._getPrimaryCalendarType(),u,c;var f=this._oResourceBundle.getText("CALENDAR_HEADER_YEAR_BUTTON_SHORTCUT");var y=this._oResourceBundle.getText("CALENDAR_HEADER_YEAR_RANGE_BUTTON_SHORTCUT");var D=this._oResourceBundle.getText("CALENDAR_HEADER_YEAR_BUTTON",[g]);var m=`${D} (${f})`;var P=this._oResourceBundle.getText("CALENDAR_HEADER_YEAR_BUTTON",[l]);var M=`${P} (${f})`;var T,C;if(this._iMode===2&&a){var v=a.getProperty("_middleDate")?a.getProperty("_middleDate"):a._getDate(),S=new _(v,d),A=n._minDate(this._getPrimaryCalendarType()).getYear(),k=n._maxDate(this._getPrimaryCalendarType()).getYear(),Y;S.setDate(1);S.setYear(S.getYear()-Math.floor(a.getYears()/2));if(S.getYear()<A){S.setYear(A)}else if(S.getYear()+a.getYears()>k){S.setYear(k-a.getYears()+1)}Y=new _(S,d);Y.setYear(Y.getYear()+a.getYears()-1);u=this._oYearFormat.format(p.getInstance(S.toUTCJSDate(),S.getCalendarType()),true);c=this._oYearFormat.format(p.getInstance(Y.toUTCJSDate(),Y.getCalendarType()),true);if(this._bActionTriggeredFromSecondHeader){h=u+" - "+c}else{o=u+" - "+c}var R="";if(this._getSecondaryCalendarType()){var H=new _(S,this._getSecondaryCalendarType());var B=new _(Y,this._getSecondaryCalendarType());if(H&&B){var w=this._oYearFormatSecondary.format(H.toUTCJSDate(),true);var E=this._oYearFormatSecondary.format(B.toUTCJSDate(),true);R=w+" - "+E}}var x=[u+" - "+c,R].filter(Boolean).join(", ");T=this._oResourceBundle.getText("CALENDAR_HEADER_YEAR_RANGE_BUTTON",[u,c]);C=`${T} (${y})`;i.setProperty("_tooltipButton4",C);i.setProperty("_keyShortcutButton4",y);i.setProperty("_descriptionButton4",x);this._setHeaderCurrentPicker(b.YEAR_PICKER)}else if(this._iMode===1&&r){this._setHeaderCurrentPicker(b.MONTH_PICKER)}else{i.setProperty("_tooltipButton4",M);i.setProperty("_keyShortcutButton4",f);i.setProperty("_descriptionButton4",P)}i._setTextButton4(h);s.setTextButton2(h);var N,L;if(this._iMode===2&&a){N=x;L=C}else{N=P;L=M}i._setAriaLabelButton4(N);s.setAriaLabelButton2(N);s.setProperty("_tooltipButton2",L);s.setProperty("_keyShortcutButton2",this._iMode===2&&a?y:f);s.setProperty("_descriptionButton2",N);i.setTextButton2(o);i.setAriaLabelButton2(this._iMode===2&&a?x:D);i.setProperty("_tooltipButton2",this._iMode===2&&a?C:m);i.setProperty("_descriptionButton2",this._iMode===2&&a?x:D);if(this._isTwoMonthsInTwoColumns()&&h!==o){var F=this._iMode===2&&a?x:P;var I=this._iMode===2&&a?C:M;var O=this._iMode===2&&a?y:f;i.setAriaLabelButton2(F);i.setProperty("_tooltipButton2",I);i.setProperty("_keyShortcutButton2",O);i.setProperty("_descriptionButton2",F)}if(h!==o){var J,U,V;if(this._iMode===2&&a){var z=h.split(" - ");if(z.length===2){var W="";if(this._getSecondaryCalendarType()){var j=new _(S,this._getSecondaryCalendarType());var K=new _(Y,this._getSecondaryCalendarType());if(j&&K){var $=this._oYearFormatSecondary.format(j.toUTCJSDate(),true);var G=this._oYearFormatSecondary.format(K.toUTCJSDate(),true);W=$+" - "+G}}var X=[z[0]+" - "+z[1],W].filter(Boolean).join(", ");J=this._oResourceBundle.getText("CALENDAR_HEADER_YEAR_RANGE_BUTTON",z);U=`${J} (${y})`;V=y;J=X}else{J=P;U=M;V=f}}else{J=P;U=M;V=f}i.setProperty("_tooltipButton4",U);i.setProperty("_keyShortcutButton4",V);i.setProperty("_descriptionButton4",J)}};Y.prototype._updateHeadersYearAdditionalText=function(e){var t=this.getAggregation("header"),a=this.getAggregation("secondMonthHeader"),r,i,s;t.setAdditionalTextButton2(e);t._setAdditionalTextButton4(e);a.setAdditionalTextButton2(e);if(e){r=this._oResourceBundle.getText("CALENDAR_HEADER_YEAR_BUTTON_SHORTCUT");i=this._oResourceBundle.getText("CALENDAR_HEADER_YEAR_BUTTON",[e]);s=`${i} (${r})`;t.setProperty("_tooltipButton4",s);t.setProperty("_keyShortcutButton4",r);t.setProperty("_descriptionButton4",i)}};Y.prototype._adjustYearRangeDisplay=function(){var e=this.getAggregation("yearRangePicker"),t=this._getPrimaryCalendarType(),r=this._getSecondaryCalendarType(),i=t===a.Japanese||r===a.Japanese;if(!this._getSucessorsPickerPopup()){if(i){e.setColumns(1);e.setYears(4)}else{e.setColumns(2);e.setYears(8)}}};function R(){var e=this.getSelectedDates();var t=this._getPrimaryCalendarType();if(e&&e[0]&&e[0].getStartDate()){this._oFocusedDate=_.fromLocalJSDate(e[0].getStartDate(),t)}else{this._oFocusedDate=_.fromLocalJSDate(f.getInstance(),t)}if(this._oFocusedDate.isBefore(this._oMinDate)){this._oFocusedDate=new _(this._oMinDate,t)}else if(this._oFocusedDate.isAfter(this._oMaxDate)){this._oFocusedDate=new _(this._oMaxDate,t)}}function H(e){var t=e.size.width;if(t<=0){return}if(t===this._iPrevWidth){return}this._iPrevWidth=t;var a=this._iSize;if(t<this._iBreakPointTablet){this._iSize=0}else if(t<this._iBreakPointDesktop){this._iSize=1}else if(t<this._iBreakPointLargeDesktop){this._iSize=2}else{this._iSize=3}var r=x.call(this);if(a!=this._iSize||this._bInitMonth){switch(this._iSize){case 1:this._setColumns(2);break;case 2:this._setColumns(3);break;case 3:this._setColumns(4);break;default:this._setColumns(1);break}if(r<this._getColumns()){this._setColumns(r)}if(this._getColumns()>2&&r>this._getColumns()){var i=this._getColumns();var s=0;var o=this._getColumns();while(i>=2){var n=r%i;if(n==0){o=i;break}else{var h=n/i;if(h>s){s=h;o=i}}i--}this._setColumns(o)}var g;var l=this.getAggregation("month");if(this._getColumns()>1){g=100/this._getColumns()+"%";this.$("content").removeClass("sapUiCalContentSingle")}else{g="100%";this.$("content").addClass("sapUiCalContentSingle")}for(var d=0;d<l.length;d++){var u=l[d];u.setWidth(g)}this.invalidate()}this._setPrimaryHeaderMonthButtonText();this._toggleTwoMonthsInColumnsCSS()}function B(e){var t=new _(e,this._getPrimaryCalendarType());t.setDate(1);var a=x.call(this);if(a<=12){var r=e.getMonth();if(12%a>0&&r+a>11){r=12-a}t.setMonth(r)}return t}function w(){var e,t,a;if(!this._bNamesLengthChecked){e=this._getMonthPicker();this._bLongMonth=e._bLongMonth;this._bNamesLengthChecked=true;this.setProperty("_currentPicker",b.MONTH);this._setHeaderCurrentPicker(b.MONTH);if(!this._bLongMonth){t=this.getAggregation("month");if(t.length>1){a=_.fromLocalJSDate(t[0].getDate(),this._getPrimaryCalendarType())}else{a=this._getFocusedDate()}this._setHeaderText(a);this._setPrimaryHeaderMonthButtonText();this._toggleTwoMonthsInColumnsCSS()}}}function E(e,t){var a,r=this._getPrimaryCalendarType(),i;if(!e){return}a=_.fromLocalJSDate(e,r);i=a.getYear();n._checkYearInValidRange(i,r);if(n._isOutside(a,this._oMinDate,this._oMaxDate)){throw new Error("Date must not be in valid range (minDate and maxDate); "+this)}this._setFocusedDate(a);if(this.getDomRef()&&this._iMode==0){this._renderMonth(t,true)}}function x(){if(D.system.phone){return 1}else{return this.getMonths()}}function N(e){this.fireEvent("_renderMonth",{days:e.getParameter("days")})}function L(e){this._oSelectedMonth=e.oSource;this.fireSelect()}function F(e){var t,a,r;if(x.call(this)>1){t=this.getAggregation("month");for(r=0;r<t.length;r++){a=t[r];if(a.getId()!=e.oSource.getId()){a._bindMousemove()}}}}function I(e){var t,a,r;if(x.call(this)>1){t=this.getAggregation("month");for(r=0;r<t.length;r++){a=t[r];if(a.getId()!=e.oSource.getId()){a._unbindMousemove()}}}}function O(e){var t=e.getParameter("offset");if(t>0){this._handleNext(e)}if(t<0){this._handlePrevious(e)}}function J(){this._updateHeadersYearPrimaryText(this._getYearString())}return Y});
//# sourceMappingURL=Calendar.js.map