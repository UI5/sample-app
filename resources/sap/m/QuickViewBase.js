/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./NavContainer","./Page","./library","sap/ui/core/Control","sap/ui/events/KeyCodes","sap/ui/thirdparty/jquery","sap/ui/dom/jquery/Focusable"],function(e,t,a,i,r,jQuery){"use strict";var o=i.extend("sap.m.QuickViewBase",{metadata:{library:"sap.m",properties:{},defaultAggregation:"pages",aggregations:{pages:{type:"sap.m.QuickViewPage",multiple:true,singularName:"page",bindable:"bindable"},_navContainer:{type:"sap.m.NavContainer",multiple:false,visibility:"hidden"}},events:{navigate:{allowPreventDefault:true,parameters:{from:{type:"sap.ui.core.Control"},fromId:{type:"string"},to:{type:"sap.ui.core.Control"},toId:{type:"string"},firstTime:{type:"boolean"},isTo:{type:"boolean"},isBack:{type:"boolean"},isBackToTop:{type:"boolean"},isBackToPage:{type:"boolean"},direction:{type:"string"},navOrigin:{type:"sap.ui.core.Control"}}},afterNavigate:{parameters:{from:{type:"sap.ui.core.Control"},fromId:{type:"string"},to:{type:"sap.ui.core.Control"},toId:{type:"string"},firstTime:{type:"boolean"},isTo:{type:"boolean"},isBack:{type:"boolean"},isBackToTop:{type:"boolean"},isBackToPage:{type:"boolean"},direction:{type:"string"},isTopPage:{type:"boolean"},navOrigin:{type:"sap.ui.core.Control"}}}}},renderer:{apiVersion:2,render:function(){}}});o.prototype.init=function(){this._oNavContainer=new e(this.getId()+"-navContainer");this.setAggregation("_navContainer",this._oNavContainer);this._oNavContainer.addPage(new t);this._oNavContainer.attachNavigate(this._navigate.bind(this));this._oNavContainer.attachAfterNavigate(this._afterNavigate.bind(this))};o.prototype.navigateBack=function(){if(!this._oNavContainer.currentPageIsTopPage()){this._setNavOrigin(null);this._oNavContainer.back()}};o.prototype.getNavContainer=function(){return this._oNavContainer};o.prototype._initPages=function(){var e=this._oNavContainer;e.destroyPages();e.init();var t=this.getAggregation("pages");if(!t){return}var a=this.getId();for(var i=0;i<t.length;i++){var r=t[i];r._oPage=null;var o={hasBackButton:i>0,popover:this._oPopover,navContainer:e,quickViewId:a,quickView:this};r.setNavContext(o);var n=this._createPage(r);this._oNavContainer.addPage(n)}};o.prototype._processKeyboard=function(e){if(e.shiftKey&&e.which===r.ENTER){this.navigateBack();e.preventDefault()}};o.prototype._createPage=function(e){return e};o.prototype._navigate=function(e){var t=e.getParameter("to");var a=e.getParameter("from");var i=e.getParameter("toId");var r=e.getParameter("fromId");var o=jQuery(document.getElementById(r)).index();var n=jQuery(document.getElementById(i)).index();if(n==-1||n>o){t.addStyleClass("sapMNavItemOffset")}else{a.addStyleClass("sapMNavItemOffset")}a.$().parents(".sapMPanelContent").scrollTop(0);var s=e.getParameters();if(this._navOrigin){s.navOrigin=this._navOrigin}this.fireNavigate(s)};o.prototype._afterNavigate=function(e){var t=e.getParameter("to");var a=e.getParameter("from");var i=e.getParameter("toId");var r=e.getParameter("fromId");var o=jQuery(document.getElementById(r)).index();var n=jQuery(document.getElementById(i)).index();if(n>o){t.removeStyleClass("sapMNavItemOffset")}else{a.removeStyleClass("sapMNavItemOffset")}var s=e.getParameters();s.isTopPage=this._oNavContainer.currentPageIsTopPage();if(this._navOrigin){s.navOrigin=this._navOrigin}this.fireAfterNavigate(s);this._setLinkWidth();setTimeout(this._restoreFocus.bind(this),0)};o.prototype._restoreFocus=function(){var e=this._oNavContainer.getCurrentPage();var t=this._oNavContainer._mFocusObject[e.getId()];if(!t){var a=e.getContent();if(a&&a.length>1){t=a[1].$().firstFocusableDomRef()}}if(t){t.focus()}};o.prototype._setLinkWidth=function(){};o.prototype._setNavOrigin=function(e){this._navOrigin=e};return o});
//# sourceMappingURL=QuickViewBase.js.map