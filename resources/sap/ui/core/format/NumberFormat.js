/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/i18n/Formatting","sap/base/i18n/Localization","sap/ui/base/Object","sap/ui/core/Locale","sap/ui/core/LocaleData","sap/ui/core/Supportability","sap/ui/core/format/FormatUtils","sap/base/Log","sap/base/assert","sap/base/util/extend"],function(e,t,r,i,n,o,a,s,u,c){"use strict";var l=r.extend("sap.ui.core.format.NumberFormat",{constructor:function(e){throw new Error}});const g=/[0#.,]+/;const f=/\s/g;const p=/\p{L}$/u;const m=/^\p{L}/u;const d=/([0#.,]*)([^0#.,]*)(¤)([^0#.,]*)([0#.,]*)/;const h=/^(-?)0+(\d)/;const y=/0+(\.0+)?/;const C=/^0+$/;const b=/^-(0(?:.0+)?)$/;const S=/0+$/;const F=/[\u061c\u200e\u200f\u202a\u202b\u202c]/g;const O=/\u200e/;const D=[10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13,1e14];var N=function(e,t,r){var i=U(e);return new RegExp("^\\d+"+"(?:"+i+"?"+"\\d{"+t+"}"+")*"+""+i+"?"+"\\d{"+r+"}"+"$")};var R={INTEGER:"integer",FLOAT:"float",CURRENCY:"currency",UNIT:"unit",PERCENT:"percent"};var L={FLOOR:"FLOOR",CEILING:"CEILING",TOWARDS_ZERO:"TOWARDS_ZERO",AWAY_FROM_ZERO:"AWAY_FROM_ZERO",HALF_FLOOR:"HALF_FLOOR",HALF_CEILING:"HALF_CEILING",HALF_TOWARDS_ZERO:"HALF_TOWARDS_ZERO",HALF_AWAY_FROM_ZERO:"HALF_AWAY_FROM_ZERO"};l.add=function(e,t){const r=e.split(".");let i=r[0];const n=r[1];const o=i[0]==="-";if(o){i=i.slice(1);t=-t}const a=i.split("").map(Number);const s=a.length-1;a[s]+=t;for(let e=s;e>=0;e-=1){if(a[e]>=10){a[e]=a[e]%10;if(e===0){a.unshift(1);break}a[e-1]+=1}else if(a[e]<0&&e>0){a[e]=10+a[e];a[e-1]-=1;if(e===1&&a[0]===0){a.shift();break}}else{break}}if(o){a[0]=-a[0]}let u=a.join("");if(!n){return u}u=u==="0"&&o?"-0":u;const c=u[0]==="-"?"-":"";if(o===!!c){return u+"."+n}const l=n.split("").map(Number);for(let e=l.length-1;e>=0;e-=1){l[e]=10-l[e];if(e>0){l[e-1]+=1}}return c+(Math.abs(a[0])-1)+"."+l.join("")};l.getMaximumDecimals=function({decimals:e,maxFractionDigits:t}){if(t>=0&&e>0&&t<e){return t}return e};function w(e){if(typeof e==="number"){return Math.ceil(e)}const[t,r="0"]=e.split(".");return C.test(r)||t[0]==="-"?t:l.add(t,1)}function I(e){if(typeof e==="number"){return Math.floor(e)}const[t,r="0"]=e.split(".");return C.test(r)||t[0]!=="-"?t:l.add(t,-1)}function E(e,t){if(typeof e==="number"){return t?e+.5:e-.5}e=l._shiftDecimalPoint(e,1);e=l.add(e,t?5:-5);return l._shiftDecimalPoint(e,-1)}const v={[L.FLOOR]:I,[L.CEILING]:w,[L.TOWARDS_ZERO]:e=>e>0?I(e):w(e),[L.AWAY_FROM_ZERO]:e=>e>0?w(e):I(e),[L.HALF_TOWARDS_ZERO]:e=>{const t=e>0;e=E(e,!t);return t?w(e):I(e)},[L.HALF_AWAY_FROM_ZERO]:e=>{const t=e>0;e=E(e,t);return t?I(e):w(e)},[L.HALF_FLOOR]:e=>w(E(e,false)),[L.HALF_CEILING]:e=>I(E(e,true))};l.RoundingMode=L;l.oDefaultIntegerFormat={minIntegerDigits:1,maxIntegerDigits:99,minFractionDigits:0,maxFractionDigits:0,strictGroupingValidation:false,groupingEnabled:false,groupingSize:3,groupingSeparator:",",decimalSeparator:".",plusSign:"+",minusSign:"-",isInteger:true,type:R.INTEGER,showMeasure:false,style:"standard",showNumber:true,parseAsString:false,preserveDecimals:false,roundingMode:l.RoundingMode.TOWARDS_ZERO,emptyString:NaN,showScale:true};l.oDefaultFloatFormat={minIntegerDigits:1,maxIntegerDigits:99,minFractionDigits:0,maxFractionDigits:99,strictGroupingValidation:false,groupingEnabled:true,groupingSize:3,groupingSeparator:",",decimalSeparator:".",plusSign:"+",minusSign:"-",isInteger:false,type:R.FLOAT,showMeasure:false,style:"standard",showNumber:true,parseAsString:false,preserveDecimals:false,roundingMode:l.RoundingMode.HALF_AWAY_FROM_ZERO,emptyString:NaN,showScale:true};l.oDefaultPercentFormat={minIntegerDigits:1,maxIntegerDigits:99,minFractionDigits:0,maxFractionDigits:99,strictGroupingValidation:false,groupingEnabled:true,groupingSize:3,groupingSeparator:",",decimalSeparator:".",plusSign:"+",minusSign:"-",percentSign:"%",isInteger:false,type:R.PERCENT,showMeasure:false,style:"standard",showNumber:true,parseAsString:false,preserveDecimals:false,roundingMode:l.RoundingMode.HALF_AWAY_FROM_ZERO,emptyString:NaN,showScale:true};l.oDefaultCurrencyFormat={minIntegerDigits:1,maxIntegerDigits:99,strictGroupingValidation:false,groupingEnabled:true,groupingSize:3,groupingSeparator:",",decimalSeparator:".",plusSign:"+",minusSign:"-",isInteger:false,type:R.CURRENCY,showMeasure:true,currencyCode:true,currencyContext:"standard",style:"standard",showNumber:true,customCurrencies:undefined,parseAsString:false,preserveDecimals:false,roundingMode:l.RoundingMode.HALF_AWAY_FROM_ZERO,emptyString:NaN,showScale:true,ignorePrecision:true};l.oDefaultUnitFormat={minIntegerDigits:1,maxIntegerDigits:99,strictGroupingValidation:false,groupingEnabled:true,groupingSize:3,groupingSeparator:",",decimalSeparator:".",plusSign:"+",minusSign:"-",isInteger:false,type:R.UNIT,showMeasure:true,style:"standard",showNumber:true,customUnits:undefined,allowedUnits:undefined,parseAsString:false,preserveDecimals:false,roundingMode:l.RoundingMode.HALF_AWAY_FROM_ZERO,emptyString:NaN,showScale:true};l.checkDecimalPadding=function(e,t=true,r=false){const i=e?.decimalPadding;if(!t&&i!==undefined){throw new Error("Unsupported format option: 'decimalPadding' cannot be used with an integer or percent"+" instance of sap.ui.core.format.NumberFormat")}if(r&&i&&e?.showMeasure!==false){throw new Error("The format option 'decimalPadding' can only be used if the format option"+" 'showMeasure' is set to false")}if(i<1){throw new Error("The format option 'decimalPadding' must have a value greater than 0")}if(i>0&&(e?.style==="short"||e?.style==="long")){throw new Error("The format option 'decimalPadding' can only be used if the format option"+" 'style' is not set to 'short' or 'long'")}};l.getInstance=function(e,t){return this.getFloatInstance(e,t)};l.getFloatInstance=function(e,t){l.checkDecimalPadding(e);const r=l.createInstance(e,t);const i=r.getLocaleFormatOptions(R.FLOAT);r.oFormatOptions=c({},this.oDefaultFloatFormat,i,r.oOriginalFormatOptions);r.checkGroupingFormatOptions();return r};l.getIntegerInstance=function(e,t){l.checkDecimalPadding(e,false);const r=l.createInstance(e,t);const i=r.getLocaleFormatOptions(R.INTEGER);r.oFormatOptions=c({},l.oDefaultIntegerFormat,i,r.oOriginalFormatOptions);r.checkGroupingFormatOptions();return r};l.getCurrencyInstance=function(e,t){l.checkDecimalPadding(e,true,true);const r=l.createInstance(e,t);const i=r.getLocaleFormatOptions(R.CURRENCY);r.oFormatOptions=c({},l.oDefaultCurrencyFormat,i,r.oOriginalFormatOptions);r.oFormatOptions.trailingCurrencyCode=r.showTrailingCurrencyCode();r._defineCustomCurrencySymbols();if(r.oFormatOptions.style==="long"){r.oFormatOptions.style="short"}r.checkGroupingFormatOptions();return r};l.getUnitInstance=function(e,t){l.checkDecimalPadding(e,true,true);const r=l.createInstance(e,t);const i=r.getLocaleFormatOptions(R.UNIT);r.oFormatOptions=c({},l.oDefaultUnitFormat,i,r.oOriginalFormatOptions);r.checkGroupingFormatOptions();return r};l.getPercentInstance=function(e,t){l.checkDecimalPadding(e,false);const r=l.createInstance(e,t);const i=r.getLocaleFormatOptions(R.PERCENT);r.oFormatOptions=c({},l.oDefaultPercentFormat,i,r.oOriginalFormatOptions);r.checkGroupingFormatOptions();return r};l.createInstance=function(t,r){var o=Object.create(this.prototype),a;if(t instanceof i){r=t;t=undefined}if(!r){r=new i(e.getLanguageTag())}o.oLocale=r;o.oLocaleData=n.getInstance(r);o.oOriginalFormatOptions=t;if(t){if(t.pattern){a=this.parseNumberPattern(t.pattern);Object.keys(a).forEach(function(e){t[e]=a[e]})}if(t.emptyString!==undefined){u(t.emptyString===""||t.emptyString===0||t.emptyString===null||t.emptyString!==t.emptyString,"The format option 'emptyString' must be either '', 0, null, or NaN")}}return o};l.getDefaultUnitPattern=function(e){return"{0} "+e};l.prototype.getLocaleFormatOptions=function(e){const t=this.oLocaleData;let r;let i;switch(e){case R.PERCENT:r=t.getPercentPattern();break;case R.CURRENCY:i=this.oOriginalFormatOptions?.currencyContext||l.oDefaultCurrencyFormat.style;if(this.showTrailingCurrencyCode()){i="sap-"+i}r=t.getCurrencyPattern(i);break;default:r=t.getDecimalPattern()}const n=l.parseNumberPattern(r);n.plusSign=t.getNumberSymbol("plusSign");n.minusSign=t.getNumberSymbol("minusSign");n.decimalSeparator=t.getNumberSymbol("decimal");n.groupingSeparator=t.getNumberSymbol("group");n.percentSign=t.getNumberSymbol("percentSign");n.pattern=r;switch(e){case R.INTEGER:n.minFractionDigits=0;n.maxFractionDigits=0;n.groupingEnabled=false;break;case R.CURRENCY:n.minFractionDigits=undefined;n.maxFractionDigits=undefined;break;default:n.minFractionDigits=0;n.maxFractionDigits=99}return n};l.parseNumberPattern=function(e){var t=0,r=0,i=0,n=false,o=0,a=0,s=e.indexOf(";"),u={Integer:0,Fraction:1},c=u.Integer;if(s!==-1){e=e.substring(0,s)}for(var l=0;l<e.length;l++){var g=e[l];switch(g){case",":if(n){o=a;a=0}n=true;break;case".":c=u.Fraction;break;case"0":if(c===u.Integer){t++;if(n){a++}}else{r++;i++}break;case"#":if(c===u.Integer){if(n){a++}}else{i++}break}}if(!o){o=a;a=0}return{minIntegerDigits:t,minFractionDigits:r,maxFractionDigits:i,groupingEnabled:n,groupingSize:o,groupingBaseSize:a}};l.prototype._defineCustomCurrencySymbols=function(){var e=this.oFormatOptions;var t=this.oLocaleData.getCurrencySymbols();var r=function(e,t){var r=[];var i;for(var n in e){i=e[n];if(r.indexOf(i)===-1){r.push(i)}else if(i!==undefined){t[i]=true;s.error("Symbol '"+i+"' is defined multiple times in custom currencies.",undefined,"NumberFormat")}}};if(e.customCurrencies&&typeof e.customCurrencies==="object"){this.mKnownCurrencySymbols={};this.mKnownCurrencyCodes={};Object.keys(e.customCurrencies).forEach(function(r){if(e.customCurrencies[r].symbol){this.mKnownCurrencySymbols[r]=e.customCurrencies[r].symbol}else{var i=e.customCurrencies[r].isoCode;if(i){this.mKnownCurrencySymbols[r]=t[i]}}this.mKnownCurrencyCodes[r]=r}.bind(this))}else{this.mKnownCurrencySymbols=t;this.mKnownCurrencyCodes=this.oLocaleData.getCustomCurrencyCodes()}this.mDuplicatedSymbols={};r(this.mKnownCurrencySymbols,this.mDuplicatedSymbols)};function _(e,t){if(e.indexOf(".")>=0&&e.endsWith("0")){var r=e.length-e.lastIndexOf(".")-1;var i=r-t;if(i>0){while(e.endsWith("0")&&i-- >0){e=e.substring(0,e.length-1)}if(e.endsWith(".")){e=e.substring(0,e.length-1)}}}return e}function A(e,t){var r=t.groupingSize,i=t.groupingBaseSize||r,n=e.length,o=Math.max(n-i,0)%r||r,a=e.slice(0,o);while(n-o>=i){a+=t.groupingSeparator;a+=e.slice(o,o+r);o+=r}a+=e.slice(o,n);return a}l.prototype.format=function(e,t){if(Array.isArray(e)){t=e[1];e=e[0]}var r="",i="",o="",a="",u="",c="",f=e<0,p=-1,m=Object.assign({},this.oFormatOptions),d=this.oOriginalFormatOptions,h=m.type===R.CURRENCY&&t==="INR"&&this.oLocale.getLanguage()==="en"&&this.oLocale.getRegion()==="IN",y,C,b,S,F,D=e===undefined||e===null;if(m.showNumber&&(e===m.emptyString||isNaN(e)&&isNaN(m.emptyString))){return""}if(t!==undefined&&t!==null&&typeof t!=="string"&&!(t instanceof String)){return""}if(!m.showNumber&&!t){return""}if(D&&(!t||!m.showMeasure||m.showNumber)){return""}if(t&&m.customCurrencies&&!m.customCurrencies[t]){s.error("Currency '"+t+"' is unknown.");return""}if(!m.showNumber&&!m.showMeasure){return""}if(t&&m.type===R.UNIT){if(m.customUnits&&typeof m.customUnits==="object"){S=m.customUnits[t]}else{F=this.oLocaleData.getUnitFromMapping(t)||t;S=this.oLocaleData.getUnitFormat(F)}if(m.showMeasure){var N=!m.allowedUnits||m.allowedUnits.indexOf(t)>=0;if(!N){return""}}if(!S&&!m.showNumber){return this._addOriginInfo(t)}}if(m.type===R.UNIT){m.decimals=S&&(typeof S.decimals==="number"&&S.decimals>=0)?S.decimals:m.decimals;m.decimals=l.getMaximumDecimals(m);m.precision=S&&(typeof S.precision==="number"&&S.precision>=0)?S.precision:m.precision}let L;if(m.type===R.CURRENCY){L=this.getCurrencySymbolOrCode(t,m.currencyCode);if(t&&m.trailingCurrencyCode){if(!this.mKnownCurrencyCodes[t]&&!/(^[A-Z]{3}$)/.test(t)){m.trailingCurrencyCode=false}}if(!m.showNumber){return L}if(m.style==="long"||m.style==="short"){m.maxFractionDigits??=0}else{if(m.customCurrencies?.[t]?.decimals!==undefined){m.decimals=m.customCurrencies[t].decimals}else{m.decimals??=this.oLocaleData.getCurrencyDigits(t)}m.decimals=l.getMaximumDecimals(m)}}if(m.decimals!==undefined){m.minFractionDigits=m.decimals;m.maxFractionDigits=m.decimals}if(m.shortLimit===undefined||Math.abs(e)>=m.shortLimit){C=m.shortRefNumber===undefined?e:m.shortRefNumber;y=this.getShortenedFormat(C,m,h);if(y&&y.formatString!="0"){e=e/y.magnitude;if(m.shortDecimals!==undefined){m.minFractionDigits=m.shortDecimals;m.maxFractionDigits=m.shortDecimals}else{if(d.minFractionDigits===undefined&&d.maxFractionDigits===undefined&&d.decimals===undefined&&d.precision===undefined&&d.pattern===undefined){m.precision=2;m.minFractionDigits=0;m.maxFractionDigits=99}if(d.maxFractionDigits===undefined&&d.decimals===undefined){m.maxFractionDigits=99}}m.roundingMode=l.RoundingMode.HALF_AWAY_FROM_ZERO}}if((y||!m.ignorePrecision)&&m.precision!==undefined){m.maxFractionDigits=Math.min(m.maxFractionDigits,T(e,m.precision));m.minFractionDigits=Math.min(m.minFractionDigits,m.maxFractionDigits)}if(m.type==R.PERCENT){e=l._shiftDecimalPoint(e,2)}if((typeof e==="number"||typeof e==="string"&&typeof m.roundingMode!=="function")&&!m.preserveDecimals){e=M(e,m.maxFractionDigits,m.roundingMode)}if(e==0){f=false}if(!D){u=n.convertToDecimal(e)}if(u==="NaN"){return u}if(m.preserveDecimals){u=_(u,m.maxFractionDigits)}if(f){u=u.substr(1)}p=u.indexOf(".");if(p>-1){r=u.substr(0,p);i=u.substr(p+1)}else{r=u}if(r.length<m.minIntegerDigits){r=r.padStart(m.minIntegerDigits,"0")}else if(r.length>m.maxIntegerDigits){r="".padStart(m.maxIntegerDigits,"?")}if(i.length<m.minFractionDigits){i=i.padEnd(m.minFractionDigits,"0")}else if(i.length>m.maxFractionDigits&&!m.preserveDecimals){i=i.substr(0,m.maxFractionDigits)}if(m.type===R.UNIT&&!m.showNumber){if(S){b=this._getPluralCategory(r,i,y);c=S["unitPattern-count-"+b];if(!c){c=S["unitPattern-count-other"]}if(!c){return this._addOriginInfo(t)}if(b!=="other"&&c.indexOf("{0}")===-1){c=S["unitPattern-count-other"];if(!c){return this._addOriginInfo(t)}}if(c.indexOf("{0}")===-1){s.warning("Cannot separate the number from the unit because unitPattern-count-other '"+c+"' does not include the number placeholder '{0}' for unit '"+t+"'")}else{return this._addOriginInfo(c.replace("{0}","").trim())}}}if(m.groupingEnabled){o=A(r,m)}else{o=r}const w=m.decimalPadding||0;if(w){m.minusSign=m.minusSign.replace(O,"")}if(f){a=m.minusSign}a+=o;if(i){a+=m.decimalSeparator+i}const I=y&&y.formatString&&m.showScale;let E;if(I){b=this._getPluralCategory(r,i);E=this.getCompactPattern(m.type,m.style,y.key,b,m.trailingCurrencyCode,h,t&&m.showMeasure,L,f);if(m.type!==R.CURRENCY){a=E.replace(y.valueSubString,a)}}if(m.type===R.CURRENCY){c=I?E:this.getCurrencyPattern(m.currencyContext,m.trailingCurrencyCode,t&&m.showMeasure,L,f);a=l._composeCurrencyResult(c,a,L,m.minusSign,f)}if(m.type===R.PERCENT){c=m.pattern;a=c.replace(g,a);a=a.replace(/%/,m.percentSign)}if(m.showMeasure&&t&&m.type===R.UNIT){b=this._getPluralCategory(r,i,y);if(S){c=S["unitPattern-count-"+b];if(!c){c=S["unitPattern-count-other"]}if(!c){c=l.getDefaultUnitPattern(t)}}else{c=l.getDefaultUnitPattern(t)}a=c.replace("{0}",a)}let v=w-i.length;if(v>0){const e=a[a.length-1]===")";const t=" ";if(i){if(e){a+=t;v=v-1}}else if(!e){a+=t}a+=" ".repeat(v)}return this._addOriginInfo(a)};l.prototype.getCurrencySymbolOrCode=function(e,t){if(t){return e}return(typeof this.oFormatOptions.customCurrencies==="object"?this.mKnownCurrencySymbols[e]:this.oLocaleData.getCurrencySymbol(e))||e};l.prototype._getPluralCategory=function(e,t,r){var i=e;if(t){i+="."+t}if(r){i+="c"+r.magnitude.toExponential().slice(2)}return this.oLocaleData.getPluralCategory(i)};l.prototype._addOriginInfo=function(e){if(o.collectOriginInfo()){e=new String(e);e.originInfo={source:"Common Locale Data Repository",locale:this.oLocale.toString()}}return e};l._composeCurrencyResult=function(e,t,r,i,n){const o=e.split(";");if(o.length===2){e=o[n?1:0];if(n){t=t.slice(i.length)}}let a=e.replace("-",i).replace(g,t).replace("¤",r);if(n){a=a.replace(r+i,r+"\ufeff"+i)}return a};l.prototype.parse=function(e){var t=this.oFormatOptions,r=t.plusSign+this.oLocaleData.getLenientNumberSymbols("plusSign"),i=t.minusSign+this.oLocaleData.getLenientNumberSymbols("minusSign"),n=U(r+i),o=U(t.groupingSeparator),c=U(t.decimalSeparator),g="^\\s*(["+n+"]?(?:[0-9"+o+"]+|[0-9"+o+"]*"+c+"[0-9]*)(?:[eE][+-]?[0-9]+)?)\\s*$",p="^\\s*(["+n+"]?[0-9"+o+"]+)\\s*$",m=new RegExp(o,"g"),d=new RegExp(c,"g"),h=this.oLocaleData.getNumberSymbol("percentSign"),y=t.type===R.CURRENCY&&this.oLocale.getLanguage()==="en"&&this.oLocale.getRegion()==="IN",C,b,S,F,O=0,D,N;if(typeof e!=="string"&&!(e instanceof String)){return null}e=a.normalize(e).trim();if(e===""){const e=t.type===R.CURRENCY||t.type===R.UNIT;if(!t.showNumber&&!e){return null}N=t.emptyString;if(t.parseAsString&&(t.emptyString===0||isNaN(t.emptyString))){N=t.emptyString+""}if(e){if(!t.showNumber){return[undefined,N]}return[N,undefined]}else{return N}}if(t.groupingSeparator===t.decimalSeparator){s.error("The grouping and decimal separator both have the same value '"+t.groupingSeparator+"'. "+"They must be different from each other such that values can be parsed correctly.")}F=t.type===R.PERCENT?t.pattern:this.oLocaleData.getPercentPattern();if(F.charAt(0)==="%"){g=g.slice(0,1)+"%?"+g.slice(1)}else if(F.charAt(F.length-1)==="%"){g=g.slice(0,g.length-1)+"%?"+g.slice(g.length-1)}var L;if(t.type===R.UNIT&&t.showMeasure){var w;if(t.customUnits&&typeof t.customUnits==="object"){w=t.customUnits}else{w=this.oLocaleData.getUnitFormats()}u(w,"Unit patterns cannot be loaded");if(t.allowedUnits){var I={};for(var E=0;E<t.allowedUnits.length;E++){var v=t.allowedUnits[E];I[v]=w[v]}w=I}var _=W(w,e,t.showNumber,this.oLocaleData.sCLDRLocaleId);var A=false;L=_.cldrCode;if(L.length===1){S=L[0];if(!t.showNumber){return[undefined,S]}}else if(L.length===0){if(t.unitOptional){_.numberValue=e}else{return null}}else{u(L.length===1,"Ambiguous unit ["+L.join(", ")+"] for input: '"+e+"'");S=undefined;A=true}if(t.strictParsing){if(A){return null}}e=_.numberValue||e}var M;if(t.type===R.CURRENCY&&t.showMeasure){M=z({value:e,currencySymbols:this.mKnownCurrencySymbols,customCurrencyCodes:this.mKnownCurrencyCodes,duplicatedSymbols:this.mDuplicatedSymbols,customCurrenciesAvailable:!!t.customCurrencies});if(!M){return null}if(t.strictParsing){if(!M.currencyCode||M.duplicatedSymbolFound){return null}}e=M.numberValue;S=M.currencyCode;if(t.customCurrencies&&S===null){return null}if(!t.showNumber){if(e){return null}return[undefined,S]}}e=e.replace(f,"");D=this.getNumberFromShortened(e,y);if(D){e=D.number}var T=P(e);if(t.isInteger&&!D&&!T){C=new RegExp(p)}else{C=new RegExp(g)}if(!C.test(e)){return t.type===R.CURRENCY||t.type===R.UNIT?null:NaN}var k=e.length;for(var Y=0;Y<k;Y++){var G=e[Y];if(r.includes(G)){e=e.replace(G,"+");break}else if(i.includes(G)){e=e.replace(G,"-");break}}e=e.replace(/^\+/,"");if(!t.isInteger&&e.indexOf(h)!==-1){b=true;e=e.replace(h,"")}var Z=e;e=e.replace(m,"");if(D){e=e.replace(d,".");e=l._shiftDecimalPoint(e,Math.round(Math.log(D.factor)/Math.LN10))}if(t.isInteger){var $;if(T){e=e.replace(d,".");$=x(e);if($===undefined){return NaN}}else{$=parseInt(e)}O=t.parseAsString?e:$}else{e=e.replace(d,".");O=t.parseAsString?e:parseFloat(e);if(b){O=l._shiftDecimalPoint(O,-2)}}var H=this._checkGrouping(Z,t,T);if(!H){return t.type===R.CURRENCY||t.type===R.UNIT?null:NaN}if(t.parseAsString&&!b){O=l._shiftDecimalPoint(e,0)}if(t.type===R.CURRENCY||t.type===R.UNIT){return[O,S]}return O};l.prototype.getScale=function(){if(this.oFormatOptions.style!=="short"&&this.oFormatOptions.style!=="long"||this.oFormatOptions.shortRefNumber===undefined){return}var e=this.getShortenedFormat(this.oFormatOptions.shortRefNumber,this.oFormatOptions),t;if(e&&e.formatString){t=e.formatString.replace(y,"").replace(/'.'/g,".").trim();if(t){return t}}};l._shiftDecimalPoint=function(e,t,r){var i="";var n=e.toString().toLowerCase().split("e");if(typeof e==="number"){t=n[1]?+n[1]+t:t;return+(n[0]+"e"+t)}else if(typeof e==="string"){if(!r&&parseFloat(e)===0&&t>=0){return e.replace(h,"$1$2")}var o=n[0].charAt(0);i=o==="-"?o:"";if(i||o==="+"){n[0]=n[0].slice(1)}e=n[0];var a=e.indexOf("."),s,u,c;if(a===-1){e=e+".";a=e.length-1}if(n[1]){a+=+n[1]}s=a+t;if(s<=0){e=e.padStart(e.length-s+1,"0");s=1}else if(s>=e.length-1){e=e.padEnd(s+1,"0");s=e.length-1}e=e.replace(".","");u=e.substring(0,s);c=e.substring(s);u=u.replace(h,"$1$2");if(r){c=c.replace(S,"")}return i+u+(c?"."+c:"")}else{return null}};l.isAlphaNextToNumber=function(e,t,r){if(!e||!t){return false}const i=e.split(";");e=(i[r?1:0]||i[0]).replace(F,"");const n=d.exec(e);if(n[1]){return m.test(t)&&!n[2]}return!n[4]&&p.test(t)&&(!r||i.length!==1)};l.prototype.getCompactPattern=function(e,t,r,i,n,o,a,s,u){let c;if(e===R.CURRENCY){if(n){t="sap-short"}if(o){t+="-indian"}if(a){c=this.oLocaleData.getCompactCurrencyPattern(t,r,i);if(l.isAlphaNextToNumber(c,s,u)){c=this.oLocaleData.getCompactCurrencyPattern(t,r,i,"alphaNextToNumber")||c}}else{c=this.oLocaleData.getCompactCurrencyPattern(t,r,i,"noCurrency");if(!c){if(t.startsWith("sap-")){t=t.slice(4)}c=this.oLocaleData.getCompactDecimalPattern(t,r,i)}}}else{c=this.oLocaleData.getCompactDecimalPattern(t,r,i)}c=c?.replace(/'.'/g,".");return c};l.prototype.getCurrencyPattern=function(e,t,r,i,n){if(t){e="sap-"+e}let o=this.oLocaleData.getCurrencyPattern(e,r?undefined:"noCurrency");if(r&&l.isAlphaNextToNumber(o,i,n)){o=this.oLocaleData.getCurrencyPattern(e,"alphaNextToNumber")||o}return o};l.prototype.getShortenedFormat=function(e,t,r){var i,n,o,a=t.style,s=t.precision!==undefined?t.precision:2;if(a!="short"&&a!="long"){return undefined}for(var u=0;u<15;u++){n=Math.pow(10,u);if(M(Math.abs(e)/n,s-1)<10){break}}o=n.toString();const c=this.getCompactPattern(t.type,t.style,o,"other",t.trailingCurrencyCode,r,t.showMeasure);if(!c||c=="0"){return undefined}else{i={};i.key=o;i.formatString=c;var l=c.match(y);if(l){i.valueSubString=l[0];var g=i.valueSubString.indexOf(".");if(g==-1){i.decimals=0;i.magnitude=n*Math.pow(10,1-i.valueSubString.length)}else{i.decimals=i.valueSubString.length-g-1;i.magnitude=n*Math.pow(10,1-g)}}else{return undefined}}return i};l.prototype.getNumberFromShortened=function(e,t){const r=this.oLocaleData.getPluralCategories();const i={number:undefined,factor:1};const n={number:undefined,factor:1};for(const o of D){for(const a of r){if(t){this.updateBestResult(n,a,o,"short-indian",e)}this.updateBestResult(i,a,o,"long",e);this.updateBestResult(i,a,o,"short",e)}}if(n.number){return n}else if(i.number){return i}return undefined};l.prototype.updateBestResult=function(e,t,r,i,n){let o=this.oLocaleData.getCompactDecimalPattern(i,r.toString(),t);if(o){o=a.normalize(o,true);o=o.replace(/'.'/g,".");const t=o.match(y);if(t){const i=t[0];const a=o.replace(i,"");if(a&&n.includes(a)){const t=n.replace(a,"");const o=r*Math.pow(10,1-i.length);if(e.number===undefined||t.length<e.number.length){e.number=t;e.factor=o}}}}};l.prototype.showTrailingCurrencyCode=function(){const t=this.oOriginalFormatOptions;if(t?.pattern||t?.currencyCode===false){return false}return t?.trailingCurrencyCode!==undefined?t.trailingCurrencyCode:e.getTrailingCurrencyCode()};l.prototype._checkGrouping=function(e,t,r){if(t.groupingSeparator&&e.includes(t.groupingSeparator)){e=e.replace(/^-/,"");e=e.replace(/^0+(\d)/,"$1");if(e.startsWith("0")||e.startsWith(t.groupingSeparator)){return false}if(r){e=e.replace(/[eE].*/,"")}var i=e.includes(t.decimalSeparator);if(t.decimalSeparator===t.groupingSeparator){i=false}else if(i){e=e.split(t.decimalSeparator)[0]}var n=e.split(t.groupingSeparator).length===2;if(n&&!i){var o=e.length-e.lastIndexOf(t.groupingSeparator);var a=t.groupingBaseSize||t.groupingSize;if(o!==a+t.groupingSeparator.length){return false}}if(t.strictGroupingValidation){if(!this._rGrouping){this._rGrouping=N(t.groupingSeparator,t.groupingSize,t.groupingBaseSize||t.groupingSize)}if(!this._rGrouping.test(e)){return false}}}return true};l.prototype.checkGroupingFormatOptions=function(){if(this.oFormatOptions.groupingEnabled&&this.oFormatOptions.groupingSize<=0){s.warning("Grouping is disabled due to non-positive groupingSize set to '"+this.oFormatOptions.groupingSize+"'.");this.oFormatOptions.groupingEnabled=false}};function P(e){return e.indexOf("e")>0||e.indexOf("E")>0}function x(e){var t=l._shiftDecimalPoint(e,0);if(t.indexOf(".")>0&&!C.test(t.split(".")[1])){return undefined}var r=parseFloat(t);var i=""+r;if(P(i)){i=l._shiftDecimalPoint(i,0)}var n=parseInt(i);if(n!==r){return undefined}return n}function M(e,t,r){r=r||l.RoundingMode.HALF_AWAY_FROM_ZERO;t=parseInt(t);var i=""+e;if(!P(i)){var n=i.indexOf(".");if(n<0){return e}if(i.substring(n+1).length<=t){if(typeof e==="string"){e=l._shiftDecimalPoint(e,0,true)}return e}}if(typeof r==="function"){e=r(e,t)}else{if(r.match(/^[a-z_]+$/)){r=r.toUpperCase()}e=l._shiftDecimalPoint(e,t,true);e=v[r](e);e=l._shiftDecimalPoint(e,-t,true);if(typeof e==="string"){e=e.replace(b,"$1")}}return e}function U(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function T(e,t){var r=Math.floor(Math.log(Math.abs(e))/Math.LN10);return Math.max(0,t-r-1)}function W(e,t,r,i){var n,o,s,u,c,l,g,f,p,m,d,h={numberValue:undefined,cldrCode:[]},y=[],C=true,b=true,S=Number.POSITIVE_INFINITY,F=true,O=t.toLocaleLowerCase(i);for(p in e){for(o in e[p]){if(!o.startsWith("unitPattern")){continue}m=a.normalize(e[p][o]);u=m.indexOf("{0}");n=u>-1;if(n&&!r){m=m.replace("{0}","").trim();n=false}s=undefined;C=true;if(n){g=m.substring(0,u);f=g.toLocaleLowerCase(i);c=m.substring(u+"{0}".length);l=c.toLocaleLowerCase(i);if(t.startsWith(g)&&t.endsWith(c)){s=t.substring(g.length,t.length-c.length)}else if(O.startsWith(f)&&O.endsWith(l)){C=false;s=t.substring(f.length,O.length-l.length)}if(s){if(s.length<S){S=s.length;F=C;h.numberValue=s;h.cldrCode=[p]}else if(s.length===S&&h.cldrCode.indexOf(p)===-1){if(C&&!F){h.numberValue=s;h.cldrCode=[p];F=true}else if(C||!F){h.cldrCode.push(p)}}}}else{d=m.toLocaleLowerCase(i);if(m===t||d===O){if(r){if(o.endsWith("-zero")){s="0"}else if(o.endsWith("-one")){s="1"}else if(o.endsWith("-two")){s="2"}if(m===t){h.numberValue=s;h.cldrCode=[p];return h}else if(!h.cldrCode.includes(p)){b=false;h.numberValue=s;h.cldrCode.push(p)}}else if(h.cldrCode.indexOf(p)===-1){if(m===t){h.cldrCode.push(p)}else if(!y.includes(p)){y.push(p)}}}}}}if((!F||!b)&&h.cldrCode.length>1){h.numberValue=undefined}if(!r&&!h.cldrCode.length){h.cldrCode=y}return h}function k(e,r,i){var n,o,s,u,c,l,g,f,p=false,m=false,d="";for(o in r){s=r[o];if(!s){continue}s=a.normalize(s);if(e.indexOf(s)>=0&&d.length<=s.length){n=o;p=false;m=true;d=s;g=s}else if(i){l=t.getLanguageTag().toString();u=s.toLocaleUpperCase(l);c=e.toLocaleUpperCase(l).indexOf(u);if(c>=0){if(d.length===s.length&&!m){p=true}else if(d.length<s.length){f=e.substring(c,c+s.length);if(f.toLocaleUpperCase(l)===u){n=o;p=false;m=false;d=s;g=f}}}}}if(p||!n){return{}}return{code:n,recognizedCurrency:g,symbol:d}}function z(e){var r,i=e.value;var n=k(i,e.currencySymbols);if(!n.code){n=k(i,e.customCurrencyCodes,true);if(!n.code&&!e.customCurrenciesAvailable){r=i.match(/(^[A-Z]{3}|[A-Z]{3}$)/i);n.code=r&&r[0].toLocaleUpperCase(t.getLanguageTag().toString());n.recognizedCurrency=r&&r[0]}}if(n.code){var o=n.recognizedCurrency.length-1;var a=n.recognizedCurrency.charAt(o);var u;var c=/[\-\s]+/;if(/\d$/.test(a)){if(i.startsWith(n.recognizedCurrency)){u=o+1;if(!c.test(i.charAt(u))){return undefined}}}else if(/^\d/.test(n.recognizedCurrency)){if(i.endsWith(n.recognizedCurrency)){u=i.indexOf(n.recognizedCurrency)-1;if(!c.test(i.charAt(u))){return undefined}}}i=i.replace(n.recognizedCurrency,"")}var l=false;if(e.duplicatedSymbols&&e.duplicatedSymbols[n.symbol]){n.code=undefined;l=true;s.error("The parsed currency symbol '"+n.symbol+"' is defined multiple "+"times in custom currencies.Therefore the result is not distinct.")}return{numberValue:i,currencyCode:n.code||undefined,duplicatedSymbolFound:l}}return l});
//# sourceMappingURL=NumberFormat.js.map