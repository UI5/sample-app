/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/i18n/Formatting","sap/base/i18n/Localization","sap/ui/core/Element","sap/ui/core/Theming","sap/ui/core/Lib","sap/ui/unified/calendar/CalendarDate","sap/ui/unified/calendar/CalendarUtils","sap/ui/unified/calendar/Month","sap/ui/core/IconPool","./PlanningCalendarLegend","sap/ui/core/InvisibleText","sap/ui/unified/library","sap/ui/core/date/UI5Date"],function(e,t,a,n,i,l,r,s,o,d,p,c,g){"use strict";var f=c.CalendarDayType;var u={apiVersion:2};u.render=function(e,t){var a=t._getCoreLocaleData();var n=t._getDensitySizes();e.openStart("div",t);e.attr("role","group");e.class("sapMSinglePCGrid");e.class("sapMSPCMonthGrid");e.openEnd();this.renderDayNames(e,t,a);e.openStart("div");e.class("sapMSinglePCGridContent");e.openEnd();this.renderCells(e,t,a,n);e.close("div");e.close("div")};u.renderCells=function(e,t,a,n){var l=t._getCells(),r=t._getVerticalLabels(),s=t._getColumns(),o=i.getResourceBundleFor("sap.ui.unified").getText("CALENDAR_WEEK"),d=[],p=[],c,g,f,u,v,D=[],S,_,y,C;for(y=0;y<t._getRows();y++){_=0;g=r[y];e.openStart("div");e.attr("role","grid");e.class("sapMSPCMonthWeek");e.openEnd();e.openStart("div");e.class("sapMSPCMonthWeekNumber");e.attr("role","row");e.attr("id",`${t.getId()}-week-${g}`);e.attr("aria-label",`${o} ${g}`);e.openEnd();e.openStart("span");e.attr("role","gridcell");e.openEnd();e.text(g);e.close("span");e.close("div");for(C=0;C<s;C++){c=y*s+C;f=l[c];u=t._getAppointmetsForADay(f);v=t._getPreviousAppointmetsForADay(f);D.push(v);S=t._aMoreCountPerDay[c];d.push(S);p.push(u);_=Math.max(_,t._aAppsLevelsPerDay[c].length)}e.openStart("div");e.class("sapMSPCMonthDays");e.class("sapMSPCMonthDaysMax"+_);e.attr("role","row");e.openEnd();for(C=0;C<s;C++){c=y*s+C;f=l[c];this.renderDay(e,t,f,c,g)}e.openStart("div");e.attr("role","gridcell");e.openEnd();e.openStart("div");e.class("sapMSinglePCBlockers");e.class("sapUiCalendarRowVisFilled");e.attr("role","list");e.openEnd();for(C=0;C<s;C++){c=y*s+C;f=l[c];if(C===0){this.renderAppointments(e,t,D[c],C,d[c],n,y,f,l,c)}this.renderAppointments(e,t,p[c],C,d[c],n,y,f,l,c)}e.close("div");e.close("div");e.close("div");e.close("div")}};u.renderDay=function(e,t,n,i,r){var o=t._getSpecialDates(),p=s.prototype._getDateTypes.call(t,n),c=t._getDateFormatter(),f=n.isSame(l.fromLocalJSDate(g.getInstance())),u,v;e.openStart("div");e.class("sapMSPCMonthDay");if(t._checkDateSelected(n)){e.class("sapMSPCMonthDaySelected")}if(f){e.class("sapMSPCMonthDayToday")}e.attr("role","gridcell");if(t._isNonWorkingDay(n)){e.class("nonWorkingTimeframe")}if(o){if(p&&p[0]){u=p[0];e.class("sapUiCalendarSpecialDay"+u.type);v=d.findLegendItemForItem(a.getElementById(t._sLegendId),u)}}e.attr("sap-ui-date",n.valueOf().toString());e.attr("tabindex",-1);e.attr("aria-labelledby",`${c.format(n.toLocalJSDate())}-Descr ${t.getId()}-week-${r}`);e.openEnd();this.renderDndPlaceholder(e,t.getAggregation("_appsPlaceholders")[i]);if(f){e.openStart("div");e.class("sapMSPCMonthNowMarker");e.openEnd()}e.openStart("div");e.class("specialDateIndicator");if(p[0]?.color){e.style("background-color",p[0].color)}e.openEnd();e.close("div");e.openStart("div");e.class("sapMSPCMonthDayNumber");e.openEnd();e.text(n.getDate());e.close("div");e.openStart("span",c.format(n.toLocalJSDate())+"-Descr");e.class("sapUiInvisibleText");e.openEnd();e.text(t._getCellStartInfo(n));if(t._sLegendId&&v){e.text(v)}if(t._doesContainAppointments(n)){e.text(t._getCellDescription())}e.close("span");if(f){e.close("div")}e.close("div")};u.renderAppointments=function(e,t,a,n,i,l,r,s,o,d){var p=t._getMaxAppointments(),c=i?p-2:p-1,g=t._getColumns(),f,u,v;for(var D=0;D<a.length;D++){u=a[D];f=t._getRowEndIndex(o,o.indexOf(s),g);if(u.level<=c){v=u._nextDay>f;if(u._nextDay===undefined||v){continue}this.renderAppointment(e,t,u,n,l,r,s);if(u.level===c&&i){this.renderMoreLink(e,t,i,s,n,g,u,l,d)}}else if(u._overflows){u.level=u._nextDayLevel;if(u._nextDay&&u._nextDayLevel<t._getMaxAppointments()-1){this.renderAppointment(e,t,u,u._nextDay,l,r,s)}}}};u.renderAppointment=function(e,a,i,r,s,o,d){var c=i.data,u=i.width,v=i.level,D=a._getCells(),S=a._getColumns(),_=c.getTooltip_AsString(),y=c.getType(),C=c.getColor(),h=c.getTitle(),m=c.getText(),A=c.getIcon(),b=c.getId(),M=c.getStartDate(),E=c.getEndDate(),I=c.getCustomData()?.filter(e=>e.getWriteToDom()),T=!!I?.length,x=c.getCustomContent(),L=!!x.length,P=!E||a._isAllDayAppointment(M,E),$=P?p.getStaticId("sap.ui.unified","CALENDAR_ALL_DAY_PREFIX"):p.getStaticId("sap.ui.unified","APPOINTMENT"),k=c.getParent().getEnableAppointmentsDragAndDrop(),w=d&&d.isSame(l.fromLocalJSDate(g.getInstance())),U={role:"listitem",labelledby:{value:$,append:true},selected:null},N=S-r-u,R=t.getRTL(),W=n.getTheme(),F=a._findStartDateIndex(D,i,a._iStartDayOffset),O=i._nextDay>F,J=D[i._nextDay],H=a._getDateColumn(D,J,S),B=a._getDateRow(D,J,S),V=B===o,z,G,K,X,Y;if(i._overflows||V){if(!i._partRendered){i._partRendered=true;O=i._nextDay>F;r=H;N=S-H+1-u;Y=l.fromLocalJSDate(E);K=a._getDateColumn(D,Y,S);if(N>0||X){N=S-K-1;if(K<r||X){N=0}}}}if(i._overflows){v=i.level}G=this.getBorderThickness(W,w);N=N<0?0:N;if(!L&&h){U["labelledby"].value=`${U["labelledby"].value} ${b}-${r}_${o}-Title`}U["labelledby"].value=`${U["labelledby"].value} ${b}-${r}_${o}-Descr`;if(!L&&m){U["labelledby"].value=`${U["labelledby"].value} ${b}-${r}_${o}-Text`}if(c.getTentative()){U["labelledby"].value=`${U["labelledby"].value} ${p.getStaticId("sap.ui.unified","APPOINTMENT_TENTATIVE")}`}if(c.getSelected()){U["describedby"]={value:p.getStaticId("sap.ui.unified","APPOINTMENT_SELECTED"),append:true}}e.openStart("div",c.getId()+"-"+r+"_"+o);e.attr("draggable",k);e.attr("data-sap-ui-draggable",k);e.attr("data-sap-ui-related",c.getId());e.attr("data-sap-level",v);e.attr("data-sap-width",u);e.attr("tabindex",0);if(T){I.forEach(t=>{e.attr(`data-${t.getKey()}`,t.getValue())})}if(_){e.attr("title",_)}e.accessibilityState(c,U);e.class("sapMSinglePCAppointmentWrap");e.class("sapUiCalendarRowApps");if(!C&&y!==f.None){e.class("sapUiCalendarApp"+y)}if(C){if(t.getRTL()){e.style("border-right-color",C)}else{e.style("border-left-color",C)}}e.style(R?"right":"left","calc("+r*100/S+"% + "+G+"rem)");e.style(R?"left":"right","calc("+N*100/S+"% + "+G+"rem)");e.style("top",v*s.appHeight+s.cellHeaderHeight+"rem");e.openEnd();e.openStart("div");e.class("sapUiCalendarApp");if(c.getSelected()){e.class("sapUiCalendarAppSel")}if(c.getTentative()){e.class("sapUiCalendarAppTent")}if(A){e.class("sapUiCalendarAppWithIcon")}e.openEnd();e.openStart("div");e.class("sapUiCalendarAppCont");if(C&&!c.getSelected()){e.style("background-color",c._getCSSColorForBackground(C))}e.openEnd();if(i.hasPrevious<0||i._overflows||O){z=["sapUiCalendarAppArrowIconLeft","sapUiCalendarAppArrowIcon"];e.icon("sap-icon://arrow-left",z,{title:null,role:"img"})}if(!L&&A){z=["sapUiCalendarAppIcon"];var j={};j["id"]=`${b}-${r}_${o}-Icon`;j["title"]=null;j["role"]="presentation";e.icon(A,z,j)}if(!L&&h){e.openStart("span",`${b}-${r}_${o}-Title`);e.class("sapUiCalendarAppTitle");e.openEnd();e.text(h,true);e.close("span")}if(L){x.forEach(function(t){e.renderControl(t)})}if(i.hasNext<0){z=["sapUiCalendarAppArrowIconRight","sapUiCalendarAppArrowIcon"];e.icon("sap-icon://arrow-right",z,{title:null,role:"img"})}e.openStart("span",`${b}-${r}_${o}-Descr`);e.class("sapUiInvisibleText");e.openEnd();e.text(a._getAppointmentAnnouncementInfo(c));e.close("span");e.close("div");e.close("div");e.close("div")};u.renderMoreLink=function(e,a,i,r,s,o,d,p,c){const f=a._getDateFormatter();const u=f.format(r.toLocalJSDate())+"-MoreLinkDesc";const v=r&&r.isSame(l.fromLocalJSDate(g.getInstance()));const D=this.getBorderThickness(n.getTheme(),v);const S=d.level;const _=o-s-1;const y=t.getRTL();e.openStart("div");e.attr("role","listitem");e.class("sapMSPCMonthLnkMore");e.style(y?"right":"left","calc("+s*100/o+"% + "+D+"rem)");e.style(y?"left":"right","calc("+_*100/o+"% + "+D+"rem)");e.style("top",(S+1)*p.appHeight+p.cellHeaderHeight+"rem");e.style("z-index","1");e.openEnd();e.renderControl(a._getMoreLink(i,r,c,u));e.openStart("span",u);e.class("sapUiInvisibleText");e.openEnd();e.text(a._getMoreLinkDescription(i,r.toLocalJSDate()));e.close("span");e.close("div")};u.getBorderThickness=function(e,t){if(e.includes("horizon")){if(t){return e.indexOf("_hc")?.4375:.0625}return e.indexOf("_hc")?.1875:.0625}if(t){return e.indexOf("_hc")?.3125:.0625}return e.indexOf("_hc")?.125:.0625};u.renderDayNames=function(t,a,n){var i=a._getFirstDayOfWeek(),s=a.getId(),o,d=e.getCalendarType(),p=n.getDaysStandAlone("abbreviated",d),c=n.getDaysStandAlone("wide",d),f=g.getInstance(a.getStartDate()),u,v;f.setDate(f.getDate()-f.getDay()+i);u=l.fromLocalJSDate(f);t.openStart("div",`${s}-Names`);t.class("sapMSPCMonthDayNames");t.openEnd();for(var D=0;D<7;D++){v=(D+i)%7;o=`${s}-WH${v}`;t.openStart("div",o);t.class("sapUiCalWH");if(D===0){t.class("sapUiCalFirstWDay")}if(r._isWeekend(u,n)){t.class("sapUiCalItemWeekEnd")}u.setDate(u.getDate()+1);t.accessibilityState(null,{label:c[v]});t.openEnd();t.text(p[v%7]);t.close("div")}t.close("div")};u.renderDndPlaceholder=function(e,t){e.openStart("div");e.class("sapMSinglePCOverlay");e.openEnd();e.renderControl(t);e.close("div")};return u},true);
//# sourceMappingURL=SinglePlanningCalendarMonthGridRenderer.js.map